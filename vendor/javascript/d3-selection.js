var e="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global;var t={};(function(e,n){n(t)})(t,(function(t){var n="http://www.w3.org/1999/xhtml";var r={svg:"http://www.w3.org/2000/svg",xhtml:n,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function namespace(e){var t=e+="",n=t.indexOf(":");n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1));return r.hasOwnProperty(t)?{space:r[t],local:e}:e}function creatorInherit(t){return function(){var r=(this||e).ownerDocument,o=(this||e).namespaceURI;return o===n&&r.documentElement.namespaceURI===n?r.createElement(t):r.createElementNS(o,t)}}function creatorFixed(t){return function(){return(this||e).ownerDocument.createElementNS(t.space,t.local)}}function creator(e){var t=namespace(e);return(t.local?creatorFixed:creatorInherit)(t)}function none(){}function selector(e){return null==e?none:function(){return this.querySelector(e)}}function selection_select(t){"function"!==typeof t&&(t=selector(t));for(var n=(this||e)._groups,r=n.length,o=new Array(r),i=0;i<r;++i)for(var s=n[i],c=s.length,l=o[i]=new Array(c),u,a,h=0;h<c;++h)if((u=s[h])&&(a=t.call(u,u.__data__,h,s))){"__data__"in u&&(a.__data__=u.__data__);l[h]=a}return new Selection(o,(this||e)._parents)}function empty(){return[]}function selectorAll(e){return null==e?empty:function(){return this.querySelectorAll(e)}}function selection_selectAll(t){"function"!==typeof t&&(t=selectorAll(t));for(var n=(this||e)._groups,r=n.length,o=[],i=[],s=0;s<r;++s)for(var c=n[s],l=c.length,u,a=0;a<l;++a)if(u=c[a]){o.push(t.call(u,u.__data__,a,c));i.push(u)}return new Selection(o,i)}function matcher(e){return function(){return this.matches(e)}}function selection_filter(t){"function"!==typeof t&&(t=matcher(t));for(var n=(this||e)._groups,r=n.length,o=new Array(r),i=0;i<r;++i)for(var s=n[i],c=s.length,l=o[i]=[],u,a=0;a<c;++a)(u=s[a])&&t.call(u,u.__data__,a,s)&&l.push(u);return new Selection(o,(this||e)._parents)}function sparse(e){return new Array(e.length)}function selection_enter(){return new Selection((this||e)._enter||(this||e)._groups.map(sparse),(this||e)._parents)}function EnterNode(t,n){(this||e).ownerDocument=t.ownerDocument;(this||e).namespaceURI=t.namespaceURI;(this||e)._next=null;(this||e)._parent=t;(this||e).__data__=n}EnterNode.prototype={constructor:EnterNode,appendChild:function(t){return(this||e)._parent.insertBefore(t,(this||e)._next)},insertBefore:function(t,n){return(this||e)._parent.insertBefore(t,n)},querySelector:function(t){return(this||e)._parent.querySelector(t)},querySelectorAll:function(t){return(this||e)._parent.querySelectorAll(t)}};function constant(e){return function(){return e}}var o="$";function bindIndex(e,t,n,r,o,i){var s=0,c,l=t.length,u=i.length;for(;s<u;++s)if(c=t[s]){c.__data__=i[s];r[s]=c}else n[s]=new EnterNode(e,i[s]);for(;s<l;++s)(c=t[s])&&(o[s]=c)}function bindKey(e,t,n,r,i,s,c){var l,u,a={},h=t.length,f=s.length,p=new Array(h),_;for(l=0;l<h;++l)if(u=t[l]){p[l]=_=o+c.call(u,u.__data__,l,t);_ in a?i[l]=u:a[_]=u}for(l=0;l<f;++l){_=o+c.call(e,s[l],l,s);if(u=a[_]){r[l]=u;u.__data__=s[l];a[_]=null}else n[l]=new EnterNode(e,s[l])}for(l=0;l<h;++l)(u=t[l])&&a[p[l]]===u&&(i[l]=u)}function selection_data(t,n){if(!t){_=new Array(this.size()),a=-1;this.each((function(e){_[++a]=e}));return _}var r=n?bindKey:bindIndex,o=(this||e)._parents,i=(this||e)._groups;"function"!==typeof t&&(t=constant(t));for(var s=i.length,c=new Array(s),l=new Array(s),u=new Array(s),a=0;a<s;++a){var h=o[a],f=i[a],p=f.length,_=t.call(h,h&&h.__data__,a,o),d=_.length,m=l[a]=new Array(d),v=c[a]=new Array(d),y=u[a]=new Array(p);r(h,f,m,v,y,_,n);for(var g=0,w=0,A,x;g<d;++g)if(A=m[g]){g>=w&&(w=g+1);while(!(x=v[w])&&++w<d);A._next=x||null}}c=new Selection(c,o);c._enter=l;c._exit=u;return c}function selection_exit(){return new Selection((this||e)._exit||(this||e)._groups.map(sparse),(this||e)._parents)}function selection_join(t,n,r){var o=this.enter(),i=this||e,s=this.exit();o="function"===typeof t?t(o):o.append(t+"");null!=n&&(i=n(i));null==r?s.remove():r(s);return o&&i?o.merge(i).order():i}function selection_merge(t){for(var n=(this||e)._groups,r=t._groups,o=n.length,i=r.length,s=Math.min(o,i),c=new Array(o),l=0;l<s;++l)for(var u=n[l],a=r[l],h=u.length,f=c[l]=new Array(h),p,_=0;_<h;++_)(p=u[_]||a[_])&&(f[_]=p);for(;l<o;++l)c[l]=n[l];return new Selection(c,(this||e)._parents)}function selection_order(){for(var t=(this||e)._groups,n=-1,r=t.length;++n<r;)for(var o=t[n],i=o.length-1,s=o[i],c;--i>=0;)if(c=o[i]){s&&4^c.compareDocumentPosition(s)&&s.parentNode.insertBefore(c,s);s=c}return this||e}function selection_sort(t){t||(t=ascending);function compareNode(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}for(var n=(this||e)._groups,r=n.length,o=new Array(r),i=0;i<r;++i){for(var s=n[i],c=s.length,l=o[i]=new Array(c),u,a=0;a<c;++a)(u=s[a])&&(l[a]=u);l.sort(compareNode)}return new Selection(o,(this||e)._parents).order()}function ascending(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function selection_call(){var t=arguments[0];arguments[0]=this||e;t.apply(null,arguments);return this||e}function selection_nodes(){var t=new Array(this.size()),n=-1;this.each((function(){t[++n]=this||e}));return t}function selection_node(){for(var t=(this||e)._groups,n=0,r=t.length;n<r;++n)for(var o=t[n],i=0,s=o.length;i<s;++i){var c=o[i];if(c)return c}return null}function selection_size(){var e=0;this.each((function(){++e}));return e}function selection_empty(){return!this.node()}function selection_each(t){for(var n=(this||e)._groups,r=0,o=n.length;r<o;++r)for(var i=n[r],s=0,c=i.length,l;s<c;++s)(l=i[s])&&t.call(l,l.__data__,s,i);return this||e}function attrRemove(e){return function(){this.removeAttribute(e)}}function attrRemoveNS(e){return function(){this.removeAttributeNS(e.space,e.local)}}function attrConstant(e,t){return function(){this.setAttribute(e,t)}}function attrConstantNS(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function attrFunction(t,n){return function(){var r=n.apply(this||e,arguments);null==r?this.removeAttribute(t):this.setAttribute(t,r)}}function attrFunctionNS(t,n){return function(){var r=n.apply(this||e,arguments);null==r?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,r)}}function selection_attr(e,t){var n=namespace(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?attrRemoveNS:attrRemove:"function"===typeof t?n.local?attrFunctionNS:attrFunction:n.local?attrConstantNS:attrConstant)(n,t))}function defaultView(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function styleRemove(t){return function(){(this||e).style.removeProperty(t)}}function styleConstant(t,n,r){return function(){(this||e).style.setProperty(t,n,r)}}function styleFunction(t,n,r){return function(){var o=n.apply(this||e,arguments);null==o?(this||e).style.removeProperty(t):(this||e).style.setProperty(t,o,r)}}function selection_style(e,t,n){return arguments.length>1?this.each((null==t?styleRemove:"function"===typeof t?styleFunction:styleConstant)(e,t,null==n?"":n)):styleValue(this.node(),e)}function styleValue(e,t){return e.style.getPropertyValue(t)||defaultView(e).getComputedStyle(e,null).getPropertyValue(t)}function propertyRemove(t){return function(){delete(this||e)[t]}}function propertyConstant(t,n){return function(){(this||e)[t]=n}}function propertyFunction(t,n){return function(){var r=n.apply(this||e,arguments);null==r?delete(this||e)[t]:(this||e)[t]=r}}function selection_property(e,t){return arguments.length>1?this.each((null==t?propertyRemove:"function"===typeof t?propertyFunction:propertyConstant)(e,t)):this.node()[e]}function classArray(e){return e.trim().split(/^|\s+/)}function classList(e){return e.classList||new ClassList(e)}function ClassList(t){(this||e)._node=t;(this||e)._names=classArray(t.getAttribute("class")||"")}ClassList.prototype={add:function(t){var n=(this||e)._names.indexOf(t);if(n<0){(this||e)._names.push(t);(this||e)._node.setAttribute("class",(this||e)._names.join(" "))}},remove:function(t){var n=(this||e)._names.indexOf(t);if(n>=0){(this||e)._names.splice(n,1);(this||e)._node.setAttribute("class",(this||e)._names.join(" "))}},contains:function(t){return(this||e)._names.indexOf(t)>=0}};function classedAdd(e,t){var n=classList(e),r=-1,o=t.length;while(++r<o)n.add(t[r])}function classedRemove(e,t){var n=classList(e),r=-1,o=t.length;while(++r<o)n.remove(t[r])}function classedTrue(t){return function(){classedAdd(this||e,t)}}function classedFalse(t){return function(){classedRemove(this||e,t)}}function classedFunction(t,n){return function(){(n.apply(this||e,arguments)?classedAdd:classedRemove)(this||e,t)}}function selection_classed(e,t){var n=classArray(e+"");if(arguments.length<2){var r=classList(this.node()),o=-1,i=n.length;while(++o<i)if(!r.contains(n[o]))return false;return true}return this.each(("function"===typeof t?classedFunction:t?classedTrue:classedFalse)(n,t))}function textRemove(){(this||e).textContent=""}function textConstant(t){return function(){(this||e).textContent=t}}function textFunction(t){return function(){var n=t.apply(this||e,arguments);(this||e).textContent=null==n?"":n}}function selection_text(e){return arguments.length?this.each(null==e?textRemove:("function"===typeof e?textFunction:textConstant)(e)):this.node().textContent}function htmlRemove(){(this||e).innerHTML=""}function htmlConstant(t){return function(){(this||e).innerHTML=t}}function htmlFunction(t){return function(){var n=t.apply(this||e,arguments);(this||e).innerHTML=null==n?"":n}}function selection_html(e){return arguments.length?this.each(null==e?htmlRemove:("function"===typeof e?htmlFunction:htmlConstant)(e)):this.node().innerHTML}function raise(){(this||e).nextSibling&&(this||e).parentNode.appendChild(this||e)}function selection_raise(){return this.each(raise)}function lower(){(this||e).previousSibling&&(this||e).parentNode.insertBefore(this||e,(this||e).parentNode.firstChild)}function selection_lower(){return this.each(lower)}function selection_append(t){var n="function"===typeof t?t:creator(t);return this.select((function(){return this.appendChild(n.apply(this||e,arguments))}))}function constantNull(){return null}function selection_insert(t,n){var r="function"===typeof t?t:creator(t),o=null==n?constantNull:"function"===typeof n?n:selector(n);return this.select((function(){return this.insertBefore(r.apply(this||e,arguments),o.apply(this||e,arguments)||null)}))}function remove(){var t=(this||e).parentNode;t&&t.removeChild(this||e)}function selection_remove(){return this.each(remove)}function selection_cloneShallow(){var t=this.cloneNode(false),n=(this||e).parentNode;return n?n.insertBefore(t,(this||e).nextSibling):t}function selection_cloneDeep(){var t=this.cloneNode(true),n=(this||e).parentNode;return n?n.insertBefore(t,(this||e).nextSibling):t}function selection_clone(e){return this.select(e?selection_cloneDeep:selection_cloneShallow)}function selection_datum(e){return arguments.length?this.property("__data__",e):this.node().__data__}var i={};t.event=null;if("undefined"!==typeof document){var s=document.documentElement;"onmouseenter"in s||(i={mouseenter:"mouseover",mouseleave:"mouseout"})}function filterContextListener(t,n,r){t=contextListener(t,n,r);return function(n){var r=n.relatedTarget;r&&(r===(this||e)||8&r.compareDocumentPosition(this||e))||t.call(this||e,n)}}function contextListener(n,r,o){return function(i){var s=t.event;t.event=i;try{n.call(this||e,(this||e).__data__,r,o)}finally{t.event=s}}}function parseTypenames(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");n>=0&&(t=e.slice(n+1),e=e.slice(0,n));return{type:e,name:t}}))}function onRemove(t){return function(){var n=(this||e).__on;if(n){for(var r=0,o=-1,i=n.length,s;r<i;++r)s=n[r],t.type&&s.type!==t.type||s.name!==t.name?n[++o]=s:this.removeEventListener(s.type,s.listener,s.capture);++o?n.length=o:delete(this||e).__on}}}function onAdd(t,n,r){var o=i.hasOwnProperty(t.type)?filterContextListener:contextListener;return function(i,s,c){var l=(this||e).__on,u,a=o(n,s,c);if(l)for(var h=0,f=l.length;h<f;++h)if((u=l[h]).type===t.type&&u.name===t.name){this.removeEventListener(u.type,u.listener,u.capture);this.addEventListener(u.type,u.listener=a,u.capture=r);u.value=n;return}this.addEventListener(t.type,a,r);u={type:t.type,name:t.name,value:n,listener:a,capture:r};l?l.push(u):(this||e).__on=[u]}}function selection_on(t,n,r){var o=parseTypenames(t+""),i,s=o.length,c;if(!(arguments.length<2)){l=n?onAdd:onRemove;null==r&&(r=false);for(i=0;i<s;++i)this.each(l(o[i],n,r));return this||e}var l=this.node().__on;if(l)for(var u=0,a=l.length,h;u<a;++u)for(i=0,h=l[u];i<s;++i)if((c=o[i]).type===h.type&&c.name===h.name)return h.value}function customEvent(e,n,r,o){var i=t.event;e.sourceEvent=t.event;t.event=e;try{return n.apply(r,o)}finally{t.event=i}}function dispatchEvent(e,t,n){var r=defaultView(e),o=r.CustomEvent;if("function"===typeof o)o=new o(t,n);else{o=r.document.createEvent("Event");n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,false,false)}e.dispatchEvent(o)}function dispatchConstant(t,n){return function(){return dispatchEvent(this||e,t,n)}}function dispatchFunction(t,n){return function(){return dispatchEvent(this||e,t,n.apply(this||e,arguments))}}function selection_dispatch(e,t){return this.each(("function"===typeof t?dispatchFunction:dispatchConstant)(e,t))}var c=[null];function Selection(t,n){(this||e)._groups=t;(this||e)._parents=n}function selection(){return new Selection([[document.documentElement]],c)}Selection.prototype=selection.prototype={constructor:Selection,select:selection_select,selectAll:selection_selectAll,filter:selection_filter,data:selection_data,enter:selection_enter,exit:selection_exit,join:selection_join,merge:selection_merge,order:selection_order,sort:selection_sort,call:selection_call,nodes:selection_nodes,node:selection_node,size:selection_size,empty:selection_empty,each:selection_each,attr:selection_attr,style:selection_style,property:selection_property,classed:selection_classed,text:selection_text,html:selection_html,raise:selection_raise,lower:selection_lower,append:selection_append,insert:selection_insert,remove:selection_remove,clone:selection_clone,datum:selection_datum,on:selection_on,dispatch:selection_dispatch};function select(e){return"string"===typeof e?new Selection([[document.querySelector(e)]],[document.documentElement]):new Selection([[e]],c)}function create(e){return select(creator(e).call(document.documentElement))}var l=0;function local(){return new Local}function Local(){(this||e)._="@"+(++l).toString(36)}Local.prototype=local.prototype={constructor:Local,get:function(t){var n=(this||e)._;while(!(n in t))if(!(t=t.parentNode))return;return t[n]},set:function(t,n){return t[(this||e)._]=n},remove:function(t){return(this||e)._ in t&&delete t[(this||e)._]},toString:function(){return(this||e)._}};function sourceEvent(){var e=t.event,n;while(n=e.sourceEvent)e=n;return e}function point(e,t){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();r.x=t.clientX,r.y=t.clientY;r=r.matrixTransform(e.getScreenCTM().inverse());return[r.x,r.y]}var o=e.getBoundingClientRect();return[t.clientX-o.left-e.clientLeft,t.clientY-o.top-e.clientTop]}function mouse(e){var t=sourceEvent();t.changedTouches&&(t=t.changedTouches[0]);return point(e,t)}function selectAll(e){return"string"===typeof e?new Selection([document.querySelectorAll(e)],[document.documentElement]):new Selection([null==e?[]:e],c)}function touch(e,t,n){arguments.length<3&&(n=t,t=sourceEvent().changedTouches);for(var r=0,o=t?t.length:0,i;r<o;++r)if((i=t[r]).identifier===n)return point(e,i);return null}function touches(e,t){null==t&&(t=sourceEvent().touches);for(var n=0,r=t?t.length:0,o=new Array(r);n<r;++n)o[n]=point(e,t[n]);return o}t.clientPoint=point;t.create=create;t.creator=creator;t.customEvent=customEvent;t.local=local;t.matcher=matcher;t.mouse=mouse;t.namespace=namespace;t.namespaces=r;t.select=select;t.selectAll=selectAll;t.selection=selection;t.selector=selector;t.selectorAll=selectorAll;t.style=styleValue;t.touch=touch;t.touches=touches;t.window=defaultView;Object.defineProperty(t,"__esModule",{value:true})}));const n=t.event,r=t.clientPoint,o=t.create,i=t.creator,s=t.customEvent,c=t.local,l=t.matcher,u=t.mouse,a=t.namespace,h=t.namespaces,f=t.select,p=t.selectAll,_=t.selection,d=t.selector,m=t.selectorAll,v=t.style,y=t.touch,g=t.touches,w=t.window,A=t.__esModule;export default t;export{A as __esModule,r as clientPoint,o as create,i as creator,s as customEvent,n as event,c as local,l as matcher,u as mouse,a as namespace,h as namespaces,f as select,p as selectAll,_ as selection,d as selector,m as selectorAll,v as style,y as touch,g as touches,w as window};

