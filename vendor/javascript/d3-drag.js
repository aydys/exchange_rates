import e from"d3-dispatch";import t from"d3-selection";var n="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global;var o={};(function(n,r){r(o,e,t)})(o,(function(e,t,o){function nopropagation(){o.event.stopImmediatePropagation()}function noevent(){o.event.preventDefault();o.event.stopImmediatePropagation()}function nodrag(e){var t=e.document.documentElement,n=o.select(e).on("dragstart.drag",noevent,true);if("onselectstart"in t)n.on("selectstart.drag",noevent,true);else{t.__noselect=t.style.MozUserSelect;t.style.MozUserSelect="none"}}function yesdrag(e,t){var n=e.document.documentElement,r=o.select(e).on("dragstart.drag",null);if(t){r.on("click.drag",noevent,true);setTimeout((function(){r.on("click.drag",null)}),0)}if("onselectstart"in n)r.on("selectstart.drag",null);else{n.style.MozUserSelect=n.__noselect;delete n.__noselect}}function constant(e){return function(){return e}}function DragEvent(e,t,o,r,a,u,i,c,s,d){(this||n).target=e;(this||n).type=t;(this||n).subject=o;(this||n).identifier=r;(this||n).active=a;(this||n).x=u;(this||n).y=i;(this||n).dx=c;(this||n).dy=s;(this||n)._=d}DragEvent.prototype.on=function(){var e=(this||n)._.on.apply((this||n)._,arguments);return e===(this||n)._?this||n:e};function defaultFilter(){return!o.event.ctrlKey&&!o.event.button}function defaultContainer(){return(this||n).parentNode}function defaultSubject(e){return null==e?{x:o.event.x,y:o.event.y}:e}function defaultTouchable(){return navigator.maxTouchPoints||"ontouchstart"in(this||n)}function drag(){var e=defaultFilter,r=defaultContainer,a=defaultSubject,u=defaultTouchable,i={},c=t.dispatch("start","drag","end"),s=0,d,l,f,g,h=0;function drag(e){e.on("mousedown.drag",mousedowned).filter(u).on("touchstart.drag",touchstarted).on("touchmove.drag",touchmoved).on("touchend.drag touchcancel.drag",touchended).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function mousedowned(){if(!g&&e.apply(this||n,arguments)){var t=beforestart("mouse",r.apply(this||n,arguments),o.mouse,this||n,arguments);if(t){o.select(o.event.view).on("mousemove.drag",mousemoved,true).on("mouseup.drag",mouseupped,true);nodrag(o.event.view);nopropagation();f=false;d=o.event.clientX;l=o.event.clientY;t("start")}}}function mousemoved(){noevent();if(!f){var e=o.event.clientX-d,t=o.event.clientY-l;f=e*e+t*t>h}i.mouse("drag")}function mouseupped(){o.select(o.event.view).on("mousemove.drag mouseup.drag",null);yesdrag(o.event.view,f);noevent();i.mouse("end")}function touchstarted(){if(e.apply(this||n,arguments)){var t=o.event.changedTouches,a=r.apply(this||n,arguments),u=t.length,i,c;for(i=0;i<u;++i)if(c=beforestart(t[i].identifier,a,o.touch,this||n,arguments)){nopropagation();c("start")}}}function touchmoved(){var e=o.event.changedTouches,t=e.length,n,r;for(n=0;n<t;++n)if(r=i[e[n].identifier]){noevent();r("drag")}}function touchended(){var e=o.event.changedTouches,t=e.length,n,r;g&&clearTimeout(g);g=setTimeout((function(){g=null}),500);for(n=0;n<t;++n)if(r=i[e[n].identifier]){nopropagation();r("end")}}function beforestart(e,t,n,r,u){var d=n(t,e),l,f,g,h=c.copy();if(o.customEvent(new DragEvent(drag,"beforestart",l,e,s,d[0],d[1],0,0,h),(function(){if(null==(o.event.subject=l=a.apply(r,u)))return false;f=l.x-d[0]||0;g=l.y-d[1]||0;return true})))return function gesture(a){var c=d,v;switch(a){case"start":i[e]=gesture,v=s++;break;case"end":delete i[e],--s;case"drag":d=n(t,e),v=s;break}o.customEvent(new DragEvent(drag,a,l,e,v,d[0]+f,d[1]+g,d[0]-c[0],d[1]-c[1],h),h.apply,h,[a,r,u])}}drag.filter=function(t){return arguments.length?(e="function"===typeof t?t:constant(!!t),drag):e};drag.container=function(e){return arguments.length?(r="function"===typeof e?e:constant(e),drag):r};drag.subject=function(e){return arguments.length?(a="function"===typeof e?e:constant(e),drag):a};drag.touchable=function(e){return arguments.length?(u="function"===typeof e?e:constant(!!e),drag):u};drag.on=function(){var e=c.on.apply(c,arguments);return e===c?drag:e};drag.clickDistance=function(e){return arguments.length?(h=(e=+e)*e,drag):Math.sqrt(h)};return drag}e.drag=drag;e.dragDisable=nodrag;e.dragEnable=yesdrag;Object.defineProperty(e,"__esModule",{value:true})}));const r=o.drag,a=o.dragDisable,u=o.dragEnable,i=o.__esModule;export default o;export{i as __esModule,r as drag,a as dragDisable,u as dragEnable};

