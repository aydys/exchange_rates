import n from"d3-array";var t="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global;var e={};(function(t,r){r(e,n)})(e,(function(n,e){function adder(){return new Adder}function Adder(){this.reset()}Adder.prototype={constructor:Adder,reset:function(){(this||t).s=(this||t).t=0},add:function(n){add(r,n,(this||t).t);add(this||t,r.s,(this||t).s);(this||t).s?(this||t).t+=r.t:(this||t).s=r.t},valueOf:function(){return(this||t).s}};var r=new Adder;function add(n,t,e){var r=n.s=t+e,i=r-t,o=r-i;n.t=t-o+(e-i)}var i=1e-6;var o=1e-12;var a=Math.PI;var c=a/2;var u=a/4;var l=2*a;var s=180/a;var f=a/180;var p=Math.abs;var g=Math.atan;var d=Math.atan2;var h=Math.cos;var v=Math.ceil;var m=Math.exp;var E=Math.log;var S=Math.pow;var R=Math.sin;var y=Math.sign||function(n){return n>0?1:n<0?-1:0};var P=Math.sqrt;var w=Math.tan;function acos(n){return n>1?0:n<-1?a:Math.acos(n)}function asin(n){return n>1?c:n<-1?-c:Math.asin(n)}function haversin(n){return(n=R(n/2))*n}function noop(){}function streamGeometry(n,t){n&&M.hasOwnProperty(n.type)&&M[n.type](n,t)}var j={Feature:function(n,t){streamGeometry(n.geometry,t)},FeatureCollection:function(n,t){var e=n.features,r=-1,i=e.length;while(++r<i)streamGeometry(e[r].geometry,t)}};var M={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates;t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){var e=n.coordinates,r=-1,i=e.length;while(++r<i)n=e[r],t.point(n[0],n[1],n[2])},LineString:function(n,t){streamLine(n.coordinates,t,0)},MultiLineString:function(n,t){var e=n.coordinates,r=-1,i=e.length;while(++r<i)streamLine(e[r],t,0)},Polygon:function(n,t){streamPolygon(n.coordinates,t)},MultiPolygon:function(n,t){var e=n.coordinates,r=-1,i=e.length;while(++r<i)streamPolygon(e[r],t)},GeometryCollection:function(n,t){var e=n.geometries,r=-1,i=e.length;while(++r<i)streamGeometry(e[r],t)}};function streamLine(n,t,e){var r=-1,i=n.length-e,o;t.lineStart();while(++r<i)o=n[r],t.point(o[0],o[1],o[2]);t.lineEnd()}function streamPolygon(n,t){var e=-1,r=n.length;t.polygonStart();while(++e<r)streamLine(n[e],t,1);t.polygonEnd()}function geoStream(n,t){n&&j.hasOwnProperty(n.type)?j[n.type](n,t):streamGeometry(n,t)}var b=adder();var C=adder(),L,x,q,A,N;var I={point:noop,lineStart:noop,lineEnd:noop,polygonStart:function(){b.reset();I.lineStart=areaRingStart;I.lineEnd=areaRingEnd},polygonEnd:function(){var n=+b;C.add(n<0?l+n:n);(this||t).lineStart=(this||t).lineEnd=(this||t).point=noop},sphere:function(){C.add(l)}};function areaRingStart(){I.point=areaPointFirst}function areaRingEnd(){areaPoint(L,x)}function areaPointFirst(n,t){I.point=areaPoint;L=n,x=t;n*=f,t*=f;q=n,A=h(t=t/2+u),N=R(t)}function areaPoint(n,t){n*=f,t*=f;t=t/2+u;var e=n-q,r=e>=0?1:-1,i=r*e,o=h(t),a=R(t),c=N*a,l=A*o+c*h(i),s=c*r*R(i);b.add(d(s,l));q=n,A=o,N=a}function area(n){C.reset();geoStream(n,I);return 2*C}function spherical(n){return[d(n[1],n[0]),asin(n[2])]}function cartesian(n){var t=n[0],e=n[1],r=h(e);return[r*h(t),r*R(t),R(e)]}function cartesianDot(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function cartesianCross(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function cartesianAddInPlace(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function cartesianScale(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function cartesianNormalizeInPlace(n){var t=P(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}var _,$,z,T,G,U,F,k,O=adder(),D,H;var W={point:boundsPoint,lineStart:boundsLineStart,lineEnd:boundsLineEnd,polygonStart:function(){W.point=boundsRingPoint;W.lineStart=boundsRingStart;W.lineEnd=boundsRingEnd;O.reset();I.polygonStart()},polygonEnd:function(){I.polygonEnd();W.point=boundsPoint;W.lineStart=boundsLineStart;W.lineEnd=boundsLineEnd;b<0?(_=-(z=180),$=-(T=90)):O>i?T=90:O<-i&&($=-90);H[0]=_,H[1]=z},sphere:function(){_=-(z=180),$=-(T=90)}};function boundsPoint(n,t){D.push(H=[_=n,z=n]);t<$&&($=t);t>T&&(T=t)}function linePoint(n,t){var e=cartesian([n*f,t*f]);if(k){var r=cartesianCross(k,e),i=[r[1],-r[0],0],o=cartesianCross(i,r);cartesianNormalizeInPlace(o);o=spherical(o);var a=n-G,c=a>0?1:-1,u=o[0]*s*c,l,g=p(a)>180;if(g^(c*G<u&&u<c*n)){l=o[1]*s;l>T&&(T=l)}else if(u=(u+360)%360-180,g^(c*G<u&&u<c*n)){l=-o[1]*s;l<$&&($=l)}else{t<$&&($=t);t>T&&(T=t)}if(g)n<G?angle(_,n)>angle(_,z)&&(z=n):angle(n,z)>angle(_,z)&&(_=n);else if(z>=_){n<_&&(_=n);n>z&&(z=n)}else n>G?angle(_,n)>angle(_,z)&&(z=n):angle(n,z)>angle(_,z)&&(_=n)}else D.push(H=[_=n,z=n]);t<$&&($=t);t>T&&(T=t);k=e,G=n}function boundsLineStart(){W.point=linePoint}function boundsLineEnd(){H[0]=_,H[1]=z;W.point=boundsPoint;k=null}function boundsRingPoint(n,t){if(k){var e=n-G;O.add(p(e)>180?e+(e>0?360:-360):e)}else U=n,F=t;I.point(n,t);linePoint(n,t)}function boundsRingStart(){I.lineStart()}function boundsRingEnd(){boundsRingPoint(U,F);I.lineEnd();p(O)>i&&(_=-(z=180));H[0]=_,H[1]=z;k=null}function angle(n,t){return(t-=n)<0?t+360:t}function rangeCompare(n,t){return n[0]-t[0]}function rangeContains(n,t){return n[0]<=n[1]?n[0]<=t&&t<=n[1]:t<n[0]||n[1]<t}function bounds(n){var t,e,r,i,o,a,c;T=z=-(_=$=Infinity);D=[];geoStream(n,W);if(e=D.length){D.sort(rangeCompare);for(t=1,r=D[0],o=[r];t<e;++t){i=D[t];if(rangeContains(r,i[0])||rangeContains(r,i[1])){angle(r[0],i[1])>angle(r[0],r[1])&&(r[1]=i[1]);angle(i[0],r[1])>angle(r[0],r[1])&&(r[0]=i[0])}else o.push(r=i)}for(a=-Infinity,e=o.length-1,t=0,r=o[e];t<=e;r=i,++t){i=o[t];(c=angle(r[1],i[0]))>a&&(a=c,_=i[0],z=r[1])}}D=H=null;return Infinity===_||Infinity===$?[[NaN,NaN],[NaN,NaN]]:[[_,$],[z,T]]}var B,X,Y,Z,J,K,Q,V,nn,tn,en,rn,on,an,cn,un;var ln={sphere:noop,point:centroidPoint,lineStart:centroidLineStart,lineEnd:centroidLineEnd,polygonStart:function(){ln.lineStart=centroidRingStart;ln.lineEnd=centroidRingEnd},polygonEnd:function(){ln.lineStart=centroidLineStart;ln.lineEnd=centroidLineEnd}};function centroidPoint(n,t){n*=f,t*=f;var e=h(t);centroidPointCartesian(e*h(n),e*R(n),R(t))}function centroidPointCartesian(n,t,e){++B;Y+=(n-Y)/B;Z+=(t-Z)/B;J+=(e-J)/B}function centroidLineStart(){ln.point=centroidLinePointFirst}function centroidLinePointFirst(n,t){n*=f,t*=f;var e=h(t);an=e*h(n);cn=e*R(n);un=R(t);ln.point=centroidLinePoint;centroidPointCartesian(an,cn,un)}function centroidLinePoint(n,t){n*=f,t*=f;var e=h(t),r=e*h(n),i=e*R(n),o=R(t),a=d(P((a=cn*o-un*i)*a+(a=un*r-an*o)*a+(a=an*i-cn*r)*a),an*r+cn*i+un*o);X+=a;K+=a*(an+(an=r));Q+=a*(cn+(cn=i));V+=a*(un+(un=o));centroidPointCartesian(an,cn,un)}function centroidLineEnd(){ln.point=centroidPoint}function centroidRingStart(){ln.point=centroidRingPointFirst}function centroidRingEnd(){centroidRingPoint(rn,on);ln.point=centroidPoint}function centroidRingPointFirst(n,t){rn=n,on=t;n*=f,t*=f;ln.point=centroidRingPoint;var e=h(t);an=e*h(n);cn=e*R(n);un=R(t);centroidPointCartesian(an,cn,un)}function centroidRingPoint(n,t){n*=f,t*=f;var e=h(t),r=e*h(n),i=e*R(n),o=R(t),a=cn*o-un*i,c=un*r-an*o,u=an*i-cn*r,l=P(a*a+c*c+u*u),s=asin(l),p=l&&-s/l;nn+=p*a;tn+=p*c;en+=p*u;X+=s;K+=s*(an+(an=r));Q+=s*(cn+(cn=i));V+=s*(un+(un=o));centroidPointCartesian(an,cn,un)}function centroid(n){B=X=Y=Z=J=K=Q=V=nn=tn=en=0;geoStream(n,ln);var t=nn,e=tn,r=en,a=t*t+e*e+r*r;if(a<o){t=K,e=Q,r=V;X<i&&(t=Y,e=Z,r=J);a=t*t+e*e+r*r;if(a<o)return[NaN,NaN]}return[d(e,t)*s,asin(r/P(a))*s]}function constant(n){return function(){return n}}function compose(n,t){function compose(e,r){return e=n(e,r),t(e[0],e[1])}n.invert&&t.invert&&(compose.invert=function(e,r){return e=t.invert(e,r),e&&n.invert(e[0],e[1])});return compose}function rotationIdentity(n,t){return[p(n)>a?n+Math.round(-n/l)*l:n,t]}rotationIdentity.invert=rotationIdentity;function rotateRadians(n,t,e){return(n%=l)?t||e?compose(rotationLambda(n),rotationPhiGamma(t,e)):rotationLambda(n):t||e?rotationPhiGamma(t,e):rotationIdentity}function forwardRotationLambda(n){return function(t,e){return t+=n,[t>a?t-l:t<-a?t+l:t,e]}}function rotationLambda(n){var t=forwardRotationLambda(n);t.invert=forwardRotationLambda(-n);return t}function rotationPhiGamma(n,t){var e=h(n),r=R(n),i=h(t),o=R(t);function rotation(n,t){var a=h(t),c=h(n)*a,u=R(n)*a,l=R(t),s=l*e+c*r;return[d(u*i-s*o,c*e-l*r),asin(s*i+u*o)]}rotation.invert=function(n,t){var a=h(t),c=h(n)*a,u=R(n)*a,l=R(t),s=l*i-u*o;return[d(u*i+l*o,c*e+s*r),asin(s*e-c*r)]};return rotation}function rotation(n){n=rotateRadians(n[0]*f,n[1]*f,n.length>2?n[2]*f:0);function forward(t){t=n(t[0]*f,t[1]*f);return t[0]*=s,t[1]*=s,t}forward.invert=function(t){t=n.invert(t[0]*f,t[1]*f);return t[0]*=s,t[1]*=s,t};return forward}function circleStream(n,t,e,r,i,o){if(e){var a=h(t),c=R(t),u=r*e;if(null==i){i=t+r*l;o=t-u/2}else{i=circleRadius(a,i);o=circleRadius(a,o);(r>0?i<o:i>o)&&(i+=r*l)}for(var s,f=i;r>0?f>o:f<o;f-=u){s=spherical([a,-c*h(f),-c*R(f)]);n.point(s[0],s[1])}}}function circleRadius(n,t){t=cartesian(t),t[0]-=n;cartesianNormalizeInPlace(t);var e=acos(-t[1]);return((-t[2]<0?-e:e)+l-i)%l}function circle(){var n=constant([0,0]),e=constant(90),r=constant(6),i,o,a={point:point};function point(n,t){i.push(n=o(n,t));n[0]*=s,n[1]*=s}function circle(){var c=n.apply(this||t,arguments),u=e.apply(this||t,arguments)*f,l=r.apply(this||t,arguments)*f;i=[];o=rotateRadians(-c[0]*f,-c[1]*f,0).invert;circleStream(a,u,l,1);c={type:"Polygon",coordinates:[i]};i=o=null;return c}circle.center=function(t){return arguments.length?(n="function"===typeof t?t:constant([+t[0],+t[1]]),circle):n};circle.radius=function(n){return arguments.length?(e="function"===typeof n?n:constant(+n),circle):e};circle.precision=function(n){return arguments.length?(r="function"===typeof n?n:constant(+n),circle):r};return circle}function clipBuffer(){var n=[],t;return{point:function(n,e,r){t.push([n,e,r])},lineStart:function(){n.push(t=[])},lineEnd:noop,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var e=n;n=[];t=null;return e}}}function pointEqual(n,t){return p(n[0]-t[0])<i&&p(n[1]-t[1])<i}function Intersection(n,e,r,i){(this||t).x=n;(this||t).z=e;(this||t).o=r;(this||t).e=i;(this||t).v=false;(this||t).n=(this||t).p=null}function clipRejoin(n,t,e,r,o){var a=[],c=[],u,l;n.forEach((function(n){if(!((t=n.length-1)<=0)){var t,e=n[0],r=n[t],l;if(pointEqual(e,r)){if(!e[2]&&!r[2]){o.lineStart();for(u=0;u<t;++u)o.point((e=n[u])[0],e[1]);o.lineEnd();return}r[0]+=2*i}a.push(l=new Intersection(e,n,null,true));c.push(l.o=new Intersection(e,null,l,false));a.push(l=new Intersection(r,n,null,false));c.push(l.o=new Intersection(r,null,l,true))}}));if(a.length){c.sort(t);link(a);link(c);for(u=0,l=c.length;u<l;++u)c[u].e=e=!e;var s=a[0],f,p;while(1){var g=s,d=true;while(g.v)if((g=g.n)===s)return;f=g.z;o.lineStart();do{g.v=g.o.v=true;if(g.e){if(d)for(u=0,l=f.length;u<l;++u)o.point((p=f[u])[0],p[1]);else r(g.x,g.n.x,1,o);g=g.n}else{if(d){f=g.p.z;for(u=f.length-1;u>=0;--u)o.point((p=f[u])[0],p[1])}else r(g.x,g.p.x,-1,o);g=g.p}g=g.o;f=g.z;d=!d}while(!g.v);o.lineEnd()}}}function link(n){if(t=n.length){var t,e=0,r=n[0],i;while(++e<t){r.n=i=n[e];i.p=r;r=i}r.n=i=n[0];i.p=r}}var sn=adder();function longitude(n){return p(n[0])<=a?n[0]:y(n[0])*((p(n[0])+a)%l-a)}function polygonContains(n,t){var e=longitude(t),r=t[1],o=R(r),s=[R(e),-h(e),0],f=0,p=0;sn.reset();1===o?r=c+i:-1===o&&(r=-c-i);for(var g=0,v=n.length;g<v;++g)if(E=(m=n[g]).length){var m,E,S=m[E-1],y=longitude(S),P=S[1]/2+u,w=R(P),j=h(P);for(var M=0;M<E;++M,y=C,w=x,j=q,S=b){var b=m[M],C=longitude(b),L=b[1]/2+u,x=R(L),q=h(L),A=C-y,N=A>=0?1:-1,I=N*A,_=I>a,$=w*x;sn.add(d($*N*R(I),j*q+$*h(I)));f+=_?A+N*l:A;if(_^y>=e^C>=e){var z=cartesianCross(cartesian(S),cartesian(b));cartesianNormalizeInPlace(z);var T=cartesianCross(s,z);cartesianNormalizeInPlace(T);var G=(_^A>=0?-1:1)*asin(T[2]);(r>G||r===G&&(z[0]||z[1]))&&(p+=_^A>=0?1:-1)}}}return(f<-i||f<i&&sn<-i)^1&p}function clip(n,t,r,i){return function(o){var a=t(o),c=clipBuffer(),u=t(c),l=false,s,f,p;var g={point:point,lineStart:lineStart,lineEnd:lineEnd,polygonStart:function(){g.point=pointRing;g.lineStart=ringStart;g.lineEnd=ringEnd;f=[];s=[]},polygonEnd:function(){g.point=point;g.lineStart=lineStart;g.lineEnd=lineEnd;f=e.merge(f);var n=polygonContains(s,i);if(f.length){l||(o.polygonStart(),l=true);clipRejoin(f,compareIntersection,n,r,o)}else if(n){l||(o.polygonStart(),l=true);o.lineStart();r(null,null,1,o);o.lineEnd()}l&&(o.polygonEnd(),l=false);f=s=null},sphere:function(){o.polygonStart();o.lineStart();r(null,null,1,o);o.lineEnd();o.polygonEnd()}};function point(t,e){n(t,e)&&o.point(t,e)}function pointLine(n,t){a.point(n,t)}function lineStart(){g.point=pointLine;a.lineStart()}function lineEnd(){g.point=point;a.lineEnd()}function pointRing(n,t){p.push([n,t]);u.point(n,t)}function ringStart(){u.lineStart();p=[]}function ringEnd(){pointRing(p[0][0],p[0][1]);u.lineEnd();var n=u.clean(),t=c.result(),e,r=t.length,i,a,g;p.pop();s.push(p);p=null;if(r)if(1&n){a=t[0];if((i=a.length-1)>0){l||(o.polygonStart(),l=true);o.lineStart();for(e=0;e<i;++e)o.point((g=a[e])[0],g[1]);o.lineEnd()}}else{r>1&&2&n&&t.push(t.pop().concat(t.shift()));f.push(t.filter(validSegment))}}return g}}function validSegment(n){return n.length>1}function compareIntersection(n,t){return((n=n.x)[0]<0?n[1]-c-i:c-n[1])-((t=t.x)[0]<0?t[1]-c-i:c-t[1])}var fn=clip((function(){return true}),clipAntimeridianLine,clipAntimeridianInterpolate,[-a,-c]);function clipAntimeridianLine(n){var t=NaN,e=NaN,r=NaN,o;return{lineStart:function(){n.lineStart();o=1},point:function(u,l){var s=u>0?a:-a,f=p(u-t);if(p(f-a)<i){n.point(t,e=(e+l)/2>0?c:-c);n.point(r,e);n.lineEnd();n.lineStart();n.point(s,e);n.point(u,e);o=0}else if(r!==s&&f>=a){p(t-r)<i&&(t-=r*i);p(u-s)<i&&(u-=s*i);e=clipAntimeridianIntersect(t,e,u,l);n.point(r,e);n.lineEnd();n.lineStart();n.point(s,e);o=0}n.point(t=u,e=l);r=s},lineEnd:function(){n.lineEnd();t=e=NaN},clean:function(){return 2-o}}}function clipAntimeridianIntersect(n,t,e,r){var o,a,c=R(n-e);return p(c)>i?g((R(t)*(a=h(r))*R(e)-R(r)*(o=h(t))*R(n))/(o*a*c)):(t+r)/2}function clipAntimeridianInterpolate(n,t,e,r){var o;if(null==n){o=e*c;r.point(-a,o);r.point(0,o);r.point(a,o);r.point(a,0);r.point(a,-o);r.point(0,-o);r.point(-a,-o);r.point(-a,0);r.point(-a,o)}else if(p(n[0]-t[0])>i){var u=n[0]<t[0]?a:-a;o=e*u/2;r.point(-u,o);r.point(0,o);r.point(u,o)}else r.point(t[0],t[1])}function clipCircle(n){var t=h(n),e=6*f,r=t>0,o=p(t)>i;function interpolate(t,r,i,o){circleStream(o,n,e,i,t,r)}function visible(n,e){return h(n)*h(e)>t}function clipLine(n){var t,e,i,c,u;return{lineStart:function(){c=i=false;u=1},point:function(l,s){var f=[l,s],p,g=visible(l,s),d=r?g?0:code(l,s):g?code(l+(l<0?a:-a),s):0;!t&&(c=i=g)&&n.lineStart();if(g!==i){p=intersect(t,f);(!p||pointEqual(t,p)||pointEqual(f,p))&&(f[2]=1)}if(g!==i){u=0;if(g){n.lineStart();p=intersect(f,t);n.point(p[0],p[1])}else{p=intersect(t,f);n.point(p[0],p[1],2);n.lineEnd()}t=p}else if(o&&t&&r^g){var h;if(!(d&e)&&(h=intersect(f,t,true))){u=0;if(r){n.lineStart();n.point(h[0][0],h[0][1]);n.point(h[1][0],h[1][1]);n.lineEnd()}else{n.point(h[1][0],h[1][1]);n.lineEnd();n.lineStart();n.point(h[0][0],h[0][1],3)}}}!g||t&&pointEqual(t,f)||n.point(f[0],f[1]);t=f,i=g,e=d},lineEnd:function(){i&&n.lineEnd();t=null},clean:function(){return u|(c&&i)<<1}}}function intersect(n,e,r){var o=cartesian(n),c=cartesian(e);var u=[1,0,0],l=cartesianCross(o,c),s=cartesianDot(l,l),f=l[0],g=s-f*f;if(!g)return!r&&n;var d=t*s/g,h=-t*f/g,v=cartesianCross(u,l),m=cartesianScale(u,d),E=cartesianScale(l,h);cartesianAddInPlace(m,E);var S=v,R=cartesianDot(m,S),y=cartesianDot(S,S),w=R*R-y*(cartesianDot(m,m)-1);if(!(w<0)){var j=P(w),M=cartesianScale(S,(-R-j)/y);cartesianAddInPlace(M,m);M=spherical(M);if(!r)return M;var b=n[0],C=e[0],L=n[1],x=e[1],q;C<b&&(q=b,b=C,C=q);var A=C-b,N=p(A-a)<i,I=N||A<i;!N&&x<L&&(q=L,L=x,x=q);if(I?N?L+x>0^M[1]<(p(M[0]-b)<i?L:x):L<=M[1]&&M[1]<=x:A>a^(b<=M[0]&&M[0]<=C)){var _=cartesianScale(S,(-R+j)/y);cartesianAddInPlace(_,m);return[M,spherical(_)]}}}function code(t,e){var i=r?n:a-n,o=0;t<-i?o|=1:t>i&&(o|=2);e<-i?o|=4:e>i&&(o|=8);return o}return clip(visible,clipLine,interpolate,r?[0,-n]:[-a,n-a])}function clipLine(n,t,e,r,i,o){var a=n[0],c=n[1],u=t[0],l=t[1],s=0,f=1,p=u-a,g=l-c,d;d=e-a;if(p||!(d>0)){d/=p;if(p<0){if(d<s)return;d<f&&(f=d)}else if(p>0){if(d>f)return;d>s&&(s=d)}d=i-a;if(p||!(d<0)){d/=p;if(p<0){if(d>f)return;d>s&&(s=d)}else if(p>0){if(d<s)return;d<f&&(f=d)}d=r-c;if(g||!(d>0)){d/=g;if(g<0){if(d<s)return;d<f&&(f=d)}else if(g>0){if(d>f)return;d>s&&(s=d)}d=o-c;if(g||!(d<0)){d/=g;if(g<0){if(d>f)return;d>s&&(s=d)}else if(g>0){if(d<s)return;d<f&&(f=d)}s>0&&(n[0]=a+s*p,n[1]=c+s*g);f<1&&(t[0]=a+f*p,t[1]=c+f*g);return true}}}}}var pn=1e9,gn=-pn;function clipRectangle(n,t,r,o){function visible(e,i){return n<=e&&e<=r&&t<=i&&i<=o}function interpolate(e,i,a,c){var u=0,l=0;if(null==e||(u=corner(e,a))!==(l=corner(i,a))||comparePoint(e,i)<0^a>0)do{c.point(0===u||3===u?n:r,u>1?o:t)}while((u=(u+a+4)%4)!==l);else c.point(i[0],i[1])}function corner(e,o){return p(e[0]-n)<i?o>0?0:3:p(e[0]-r)<i?o>0?2:1:p(e[1]-t)<i?o>0?1:0:o>0?3:2}function compareIntersection(n,t){return comparePoint(n.x,t.x)}function comparePoint(n,t){var e=corner(n,1),r=corner(t,1);return e!==r?e-r:0===e?t[1]-n[1]:1===e?n[0]-t[0]:2===e?n[1]-t[1]:t[0]-n[0]}return function(i){var a=i,c=clipBuffer(),u,l,s,f,p,g,d,h,v,m,E;var S={point:point,lineStart:lineStart,lineEnd:lineEnd,polygonStart:polygonStart,polygonEnd:polygonEnd};function point(n,t){visible(n,t)&&a.point(n,t)}function polygonInside(){var t=0;for(var e=0,r=l.length;e<r;++e)for(var i=l[e],a=1,c=i.length,u=i[0],s,f,p=u[0],g=u[1];a<c;++a){s=p,f=g,u=i[a],p=u[0],g=u[1];f<=o?g>o&&(p-s)*(o-f)>(g-f)*(n-s)&&++t:g<=o&&(p-s)*(o-f)<(g-f)*(n-s)&&--t}return t}function polygonStart(){a=c,u=[],l=[],E=true}function polygonEnd(){var n=polygonInside(),t=E&&n,r=(u=e.merge(u)).length;if(t||r){i.polygonStart();if(t){i.lineStart();interpolate(null,null,1,i);i.lineEnd()}r&&clipRejoin(u,compareIntersection,n,interpolate,i);i.polygonEnd()}a=i,u=l=s=null}function lineStart(){S.point=linePoint;l&&l.push(s=[]);m=true;v=false;d=h=NaN}function lineEnd(){if(u){linePoint(f,p);g&&v&&c.rejoin();u.push(c.result())}S.point=point;v&&a.lineEnd()}function linePoint(e,i){var c=visible(e,i);l&&s.push([e,i]);if(m){f=e,p=i,g=c;m=false;if(c){a.lineStart();a.point(e,i)}}else if(c&&v)a.point(e,i);else{var u=[d=Math.max(gn,Math.min(pn,d)),h=Math.max(gn,Math.min(pn,h))],S=[e=Math.max(gn,Math.min(pn,e)),i=Math.max(gn,Math.min(pn,i))];if(clipLine(u,S,n,t,r,o)){if(!v){a.lineStart();a.point(u[0],u[1])}a.point(S[0],S[1]);c||a.lineEnd();E=false}else if(c){a.lineStart();a.point(e,i);E=false}}d=e,h=i,v=c}return S}}function extent(){var n=0,t=0,e=960,r=500,i,o,a;return a={stream:function(a){return i&&o===a?i:i=clipRectangle(n,t,e,r)(o=a)},extent:function(c){return arguments.length?(n=+c[0][0],t=+c[0][1],e=+c[1][0],r=+c[1][1],i=o=null,a):[[n,t],[e,r]]}}}var dn=adder(),hn,vn,mn;var En={sphere:noop,point:noop,lineStart:lengthLineStart,lineEnd:noop,polygonStart:noop,polygonEnd:noop};function lengthLineStart(){En.point=lengthPointFirst;En.lineEnd=lengthLineEnd}function lengthLineEnd(){En.point=En.lineEnd=noop}function lengthPointFirst(n,t){n*=f,t*=f;hn=n,vn=R(t),mn=h(t);En.point=lengthPoint}function lengthPoint(n,t){n*=f,t*=f;var e=R(t),r=h(t),i=p(n-hn),o=h(i),a=R(i),c=r*a,u=mn*e-vn*r*o,l=vn*e+mn*r*o;dn.add(d(P(c*c+u*u),l));hn=n,vn=e,mn=r}function length(n){dn.reset();geoStream(n,En);return+dn}var Sn=[null,null],Rn={type:"LineString",coordinates:Sn};function distance(n,t){Sn[0]=n;Sn[1]=t;return length(Rn)}var yn={Feature:function(n,t){return containsGeometry(n.geometry,t)},FeatureCollection:function(n,t){var e=n.features,r=-1,i=e.length;while(++r<i)if(containsGeometry(e[r].geometry,t))return true;return false}};var Pn={Sphere:function(){return true},Point:function(n,t){return containsPoint(n.coordinates,t)},MultiPoint:function(n,t){var e=n.coordinates,r=-1,i=e.length;while(++r<i)if(containsPoint(e[r],t))return true;return false},LineString:function(n,t){return containsLine(n.coordinates,t)},MultiLineString:function(n,t){var e=n.coordinates,r=-1,i=e.length;while(++r<i)if(containsLine(e[r],t))return true;return false},Polygon:function(n,t){return containsPolygon(n.coordinates,t)},MultiPolygon:function(n,t){var e=n.coordinates,r=-1,i=e.length;while(++r<i)if(containsPolygon(e[r],t))return true;return false},GeometryCollection:function(n,t){var e=n.geometries,r=-1,i=e.length;while(++r<i)if(containsGeometry(e[r],t))return true;return false}};function containsGeometry(n,t){return!(!n||!Pn.hasOwnProperty(n.type))&&Pn[n.type](n,t)}function containsPoint(n,t){return 0===distance(n,t)}function containsLine(n,t){var e,r,i;for(var a=0,c=n.length;a<c;a++){r=distance(n[a],t);if(0===r)return true;if(a>0){i=distance(n[a],n[a-1]);if(i>0&&e<=i&&r<=i&&(e+r-i)*(1-Math.pow((e-r)/i,2))<o*i)return true}e=r}return false}function containsPolygon(n,t){return!!polygonContains(n.map(ringRadians),pointRadians(t))}function ringRadians(n){return n=n.map(pointRadians),n.pop(),n}function pointRadians(n){return[n[0]*f,n[1]*f]}function contains(n,t){return(n&&yn.hasOwnProperty(n.type)?yn[n.type]:containsGeometry)(n,t)}function graticuleX(n,t,r){var o=e.range(n,t-i,r).concat(t);return function(n){return o.map((function(t){return[n,t]}))}}function graticuleY(n,t,r){var o=e.range(n,t-i,r).concat(t);return function(n){return o.map((function(t){return[t,n]}))}}function graticule(){var n,t,r,o,a,c,u,l,s=10,f=s,g=90,d=360,h,m,E,S,R=2.5;function graticule(){return{type:"MultiLineString",coordinates:lines()}}function lines(){return e.range(v(o/g)*g,r,g).map(E).concat(e.range(v(l/d)*d,u,d).map(S)).concat(e.range(v(t/s)*s,n,s).filter((function(n){return p(n%g)>i})).map(h)).concat(e.range(v(c/f)*f,a,f).filter((function(n){return p(n%d)>i})).map(m))}graticule.lines=function(){return lines().map((function(n){return{type:"LineString",coordinates:n}}))};graticule.outline=function(){return{type:"Polygon",coordinates:[E(o).concat(S(u).slice(1),E(r).reverse().slice(1),S(l).reverse().slice(1))]}};graticule.extent=function(n){return arguments.length?graticule.extentMajor(n).extentMinor(n):graticule.extentMinor()};graticule.extentMajor=function(n){if(!arguments.length)return[[o,l],[r,u]];o=+n[0][0],r=+n[1][0];l=+n[0][1],u=+n[1][1];o>r&&(n=o,o=r,r=n);l>u&&(n=l,l=u,u=n);return graticule.precision(R)};graticule.extentMinor=function(e){if(!arguments.length)return[[t,c],[n,a]];t=+e[0][0],n=+e[1][0];c=+e[0][1],a=+e[1][1];t>n&&(e=t,t=n,n=e);c>a&&(e=c,c=a,a=e);return graticule.precision(R)};graticule.step=function(n){return arguments.length?graticule.stepMajor(n).stepMinor(n):graticule.stepMinor()};graticule.stepMajor=function(n){if(!arguments.length)return[g,d];g=+n[0],d=+n[1];return graticule};graticule.stepMinor=function(n){if(!arguments.length)return[s,f];s=+n[0],f=+n[1];return graticule};graticule.precision=function(e){if(!arguments.length)return R;R=+e;h=graticuleX(c,a,90);m=graticuleY(t,n,R);E=graticuleX(l,u,90);S=graticuleY(o,r,R);return graticule};return graticule.extentMajor([[-180,-90+i],[180,90-i]]).extentMinor([[-180,-80-i],[180,80+i]])}function graticule10(){return graticule()()}function interpolate(n,t){var e=n[0]*f,r=n[1]*f,i=t[0]*f,o=t[1]*f,a=h(r),c=R(r),u=h(o),l=R(o),p=a*h(e),g=a*R(e),v=u*h(i),m=u*R(i),E=2*asin(P(haversin(o-r)+a*u*haversin(i-e))),S=R(E);var y=E?function(n){var t=R(n*=E)/S,e=R(E-n)/S,r=e*p+t*v,i=e*g+t*m,o=e*c+t*l;return[d(i,r)*s,d(o,P(r*r+i*i))*s]}:function(){return[e*s,r*s]};y.distance=E;return y}function identity(n){return n}var wn=adder(),jn=adder(),Mn,bn,Cn,Ln;var xn={point:noop,lineStart:noop,lineEnd:noop,polygonStart:function(){xn.lineStart=areaRingStart$1;xn.lineEnd=areaRingEnd$1},polygonEnd:function(){xn.lineStart=xn.lineEnd=xn.point=noop;wn.add(p(jn));jn.reset()},result:function(){var n=wn/2;wn.reset();return n}};function areaRingStart$1(){xn.point=areaPointFirst$1}function areaPointFirst$1(n,t){xn.point=areaPoint$1;Mn=Cn=n,bn=Ln=t}function areaPoint$1(n,t){jn.add(Ln*n-Cn*t);Cn=n,Ln=t}function areaRingEnd$1(){areaPoint$1(Mn,bn)}var qn=Infinity,An=qn,Nn=-qn,In=Nn;var _n={point:boundsPoint$1,lineStart:noop,lineEnd:noop,polygonStart:noop,polygonEnd:noop,result:function(){var n=[[qn,An],[Nn,In]];Nn=In=-(An=qn=Infinity);return n}};function boundsPoint$1(n,t){n<qn&&(qn=n);n>Nn&&(Nn=n);t<An&&(An=t);t>In&&(In=t)}var $n=0,zn=0,Tn=0,Gn=0,Un=0,Fn=0,kn=0,On=0,Dn=0,Hn,Wn,Bn,Xn;var Yn={point:centroidPoint$1,lineStart:centroidLineStart$1,lineEnd:centroidLineEnd$1,polygonStart:function(){Yn.lineStart=centroidRingStart$1;Yn.lineEnd=centroidRingEnd$1},polygonEnd:function(){Yn.point=centroidPoint$1;Yn.lineStart=centroidLineStart$1;Yn.lineEnd=centroidLineEnd$1},result:function(){var n=Dn?[kn/Dn,On/Dn]:Fn?[Gn/Fn,Un/Fn]:Tn?[$n/Tn,zn/Tn]:[NaN,NaN];$n=zn=Tn=Gn=Un=Fn=kn=On=Dn=0;return n}};function centroidPoint$1(n,t){$n+=n;zn+=t;++Tn}function centroidLineStart$1(){Yn.point=centroidPointFirstLine}function centroidPointFirstLine(n,t){Yn.point=centroidPointLine;centroidPoint$1(Bn=n,Xn=t)}function centroidPointLine(n,t){var e=n-Bn,r=t-Xn,i=P(e*e+r*r);Gn+=i*(Bn+n)/2;Un+=i*(Xn+t)/2;Fn+=i;centroidPoint$1(Bn=n,Xn=t)}function centroidLineEnd$1(){Yn.point=centroidPoint$1}function centroidRingStart$1(){Yn.point=centroidPointFirstRing}function centroidRingEnd$1(){centroidPointRing(Hn,Wn)}function centroidPointFirstRing(n,t){Yn.point=centroidPointRing;centroidPoint$1(Hn=Bn=n,Wn=Xn=t)}function centroidPointRing(n,t){var e=n-Bn,r=t-Xn,i=P(e*e+r*r);Gn+=i*(Bn+n)/2;Un+=i*(Xn+t)/2;Fn+=i;i=Xn*n-Bn*t;kn+=i*(Bn+n);On+=i*(Xn+t);Dn+=3*i;centroidPoint$1(Bn=n,Xn=t)}function PathContext(n){(this||t)._context=n}PathContext.prototype={_radius:4.5,pointRadius:function(n){return(this||t)._radius=n,this||t},polygonStart:function(){(this||t)._line=0},polygonEnd:function(){(this||t)._line=NaN},lineStart:function(){(this||t)._point=0},lineEnd:function(){0===(this||t)._line&&(this||t)._context.closePath();(this||t)._point=NaN},point:function(n,e){switch((this||t)._point){case 0:(this||t)._context.moveTo(n,e);(this||t)._point=1;break;case 1:(this||t)._context.lineTo(n,e);break;default:(this||t)._context.moveTo(n+(this||t)._radius,e);(this||t)._context.arc(n,e,(this||t)._radius,0,l);break}},result:noop};var Zn=adder(),Jn,Kn,Qn,Vn,nt;var tt={point:noop,lineStart:function(){tt.point=lengthPointFirst$1},lineEnd:function(){Jn&&lengthPoint$1(Kn,Qn);tt.point=noop},polygonStart:function(){Jn=true},polygonEnd:function(){Jn=null},result:function(){var n=+Zn;Zn.reset();return n}};function lengthPointFirst$1(n,t){tt.point=lengthPoint$1;Kn=Vn=n,Qn=nt=t}function lengthPoint$1(n,t){Vn-=n,nt-=t;Zn.add(P(Vn*Vn+nt*nt));Vn=n,nt=t}function PathString(){(this||t)._string=[]}PathString.prototype={_radius:4.5,_circle:circle$1(4.5),pointRadius:function(n){(n=+n)!==(this||t)._radius&&((this||t)._radius=n,(this||t)._circle=null);return this||t},polygonStart:function(){(this||t)._line=0},polygonEnd:function(){(this||t)._line=NaN},lineStart:function(){(this||t)._point=0},lineEnd:function(){0===(this||t)._line&&(this||t)._string.push("Z");(this||t)._point=NaN},point:function(n,e){switch((this||t)._point){case 0:(this||t)._string.push("M",n,",",e);(this||t)._point=1;break;case 1:(this||t)._string.push("L",n,",",e);break;default:null==(this||t)._circle&&((this||t)._circle=circle$1((this||t)._radius));(this||t)._string.push("M",n,",",e,(this||t)._circle);break}},result:function(){if((this||t)._string.length){var n=(this||t)._string.join("");(this||t)._string=[];return n}return null}};function circle$1(n){return"m0,"+n+"a"+n+","+n+" 0 1,1 0,"+-2*n+"a"+n+","+n+" 0 1,1 0,"+2*n+"z"}function index(n,e){var r=4.5,i,o;function path(n){if(n){"function"===typeof r&&o.pointRadius(+r.apply(this||t,arguments));geoStream(n,i(o))}return o.result()}path.area=function(n){geoStream(n,i(xn));return xn.result()};path.measure=function(n){geoStream(n,i(tt));return tt.result()};path.bounds=function(n){geoStream(n,i(_n));return _n.result()};path.centroid=function(n){geoStream(n,i(Yn));return Yn.result()};path.projection=function(t){return arguments.length?(i=null==t?(n=null,identity):(n=t).stream,path):n};path.context=function(n){if(!arguments.length)return e;o=null==n?(e=null,new PathString):new PathContext(e=n);"function"!==typeof r&&o.pointRadius(r);return path};path.pointRadius=function(n){if(!arguments.length)return r;r="function"===typeof n?n:(o.pointRadius(+n),+n);return path};return path.projection(n).context(e)}function transform(n){return{stream:transformer(n)}}function transformer(n){return function(t){var e=new TransformStream;for(var r in n)e[r]=n[r];e.stream=t;return e}}function TransformStream(){}TransformStream.prototype={constructor:TransformStream,point:function(n,e){(this||t).stream.point(n,e)},sphere:function(){(this||t).stream.sphere()},lineStart:function(){(this||t).stream.lineStart()},lineEnd:function(){(this||t).stream.lineEnd()},polygonStart:function(){(this||t).stream.polygonStart()},polygonEnd:function(){(this||t).stream.polygonEnd()}};function fit(n,t,e){var r=n.clipExtent&&n.clipExtent();n.scale(150).translate([0,0]);null!=r&&n.clipExtent(null);geoStream(e,n.stream(_n));t(_n.result());null!=r&&n.clipExtent(r);return n}function fitExtent(n,t,e){return fit(n,(function(e){var r=t[1][0]-t[0][0],i=t[1][1]-t[0][1],o=Math.min(r/(e[1][0]-e[0][0]),i/(e[1][1]-e[0][1])),a=+t[0][0]+(r-o*(e[1][0]+e[0][0]))/2,c=+t[0][1]+(i-o*(e[1][1]+e[0][1]))/2;n.scale(150*o).translate([a,c])}),e)}function fitSize(n,t,e){return fitExtent(n,[[0,0],t],e)}function fitWidth(n,t,e){return fit(n,(function(e){var r=+t,i=r/(e[1][0]-e[0][0]),o=(r-i*(e[1][0]+e[0][0]))/2,a=-i*e[0][1];n.scale(150*i).translate([o,a])}),e)}function fitHeight(n,t,e){return fit(n,(function(e){var r=+t,i=r/(e[1][1]-e[0][1]),o=-i*e[0][0],a=(r-i*(e[1][1]+e[0][1]))/2;n.scale(150*i).translate([o,a])}),e)}var et=16,rt=h(30*f);function resample(n,t){return+t?resample$1(n,t):resampleNone(n)}function resampleNone(n){return transformer({point:function(e,r){e=n(e,r);(this||t).stream.point(e[0],e[1])}})}function resample$1(n,t){function resampleLineTo(e,r,o,a,c,u,l,s,f,g,h,v,m,E){var S=l-e,R=s-r,y=S*S+R*R;if(y>4*t&&m--){var w=a+g,j=c+h,M=u+v,b=P(w*w+j*j+M*M),C=asin(M/=b),L=p(p(M)-1)<i||p(o-f)<i?(o+f)/2:d(j,w),x=n(L,C),q=x[0],A=x[1],N=q-e,I=A-r,_=R*N-S*I;if(_*_/y>t||p((S*N+R*I)/y-.5)>.3||a*g+c*h+u*v<rt){resampleLineTo(e,r,o,a,c,u,q,A,L,w/=b,j/=b,M,m,E);E.point(q,A);resampleLineTo(q,A,L,w,j,M,l,s,f,g,h,v,m,E)}}}return function(t){var e,r,i,o,a,c,u,l,s,f,p,g;var d={point:point,lineStart:lineStart,lineEnd:lineEnd,polygonStart:function(){t.polygonStart();d.lineStart=ringStart},polygonEnd:function(){t.polygonEnd();d.lineStart=lineStart}};function point(e,r){e=n(e,r);t.point(e[0],e[1])}function lineStart(){l=NaN;d.point=linePoint;t.lineStart()}function linePoint(e,r){var i=cartesian([e,r]),o=n(e,r);resampleLineTo(l,s,u,f,p,g,l=o[0],s=o[1],u=e,f=i[0],p=i[1],g=i[2],et,t);t.point(l,s)}function lineEnd(){d.point=point;t.lineEnd()}function ringStart(){lineStart();d.point=ringPoint;d.lineEnd=ringEnd}function ringPoint(n,t){linePoint(e=n,t),r=l,i=s,o=f,a=p,c=g;d.point=linePoint}function ringEnd(){resampleLineTo(l,s,u,f,p,g,r,i,e,o,a,c,et,t);d.lineEnd=lineEnd;lineEnd()}return d}}var it=transformer({point:function(n,e){(this||t).stream.point(n*f,e*f)}});function transformRotate(n){return transformer({point:function(e,r){var i=n(e,r);return(this||t).stream.point(i[0],i[1])}})}function scaleTranslate(n,t,e,r,i){function transform(o,a){o*=r;a*=i;return[t+n*o,e-n*a]}transform.invert=function(o,a){return[(o-t)/n*r,(e-a)/n*i]};return transform}function scaleTranslateRotate(n,t,e,r,i,o){var a=h(o),c=R(o),u=a*n,l=c*n,s=a/n,f=c/n,p=(c*e-a*t)/n,g=(c*t+a*e)/n;function transform(n,o){n*=r;o*=i;return[u*n-l*o+t,e-l*n-u*o]}transform.invert=function(n,t){return[r*(s*n-f*t+p),i*(g-f*n-s*t)]};return transform}function projection(n){return projectionMutator((function(){return n}))()}function projectionMutator(n){var e,r=150,i=480,o=250,a=0,c=0,u=0,l=0,p=0,g,d=0,h=1,v=1,m=null,E=fn,S=null,R,y,w,j=identity,M=.5,b,C,L,x,q;function projection(n){return L(n[0]*f,n[1]*f)}function invert(n){n=L.invert(n[0],n[1]);return n&&[n[0]*s,n[1]*s]}projection.stream=function(n){return x&&q===n?x:x=it(transformRotate(g)(E(b(j(q=n)))))};projection.preclip=function(n){return arguments.length?(E=n,m=void 0,reset()):E};projection.postclip=function(n){return arguments.length?(j=n,S=R=y=w=null,reset()):j};projection.clipAngle=function(n){return arguments.length?(E=+n?clipCircle(m=n*f):(m=null,fn),reset()):m*s};projection.clipExtent=function(n){return arguments.length?(j=null==n?(S=R=y=w=null,identity):clipRectangle(S=+n[0][0],R=+n[0][1],y=+n[1][0],w=+n[1][1]),reset()):null==S?null:[[S,R],[y,w]]};projection.scale=function(n){return arguments.length?(r=+n,recenter()):r};projection.translate=function(n){return arguments.length?(i=+n[0],o=+n[1],recenter()):[i,o]};projection.center=function(n){return arguments.length?(a=n[0]%360*f,c=n[1]%360*f,recenter()):[a*s,c*s]};projection.rotate=function(n){return arguments.length?(u=n[0]%360*f,l=n[1]%360*f,p=n.length>2?n[2]%360*f:0,recenter()):[u*s,l*s,p*s]};projection.angle=function(n){return arguments.length?(d=n%360*f,recenter()):d*s};projection.reflectX=function(n){return arguments.length?(h=n?-1:1,recenter()):h<0};projection.reflectY=function(n){return arguments.length?(v=n?-1:1,recenter()):v<0};projection.precision=function(n){return arguments.length?(b=resample(C,M=n*n),reset()):P(M)};projection.fitExtent=function(n,t){return fitExtent(projection,n,t)};projection.fitSize=function(n,t){return fitSize(projection,n,t)};projection.fitWidth=function(n,t){return fitWidth(projection,n,t)};projection.fitHeight=function(n,t){return fitHeight(projection,n,t)};function recenter(){var n=scaleTranslateRotate(r,0,0,h,v,d).apply(null,e(a,c)),t=(d?scaleTranslateRotate:scaleTranslate)(r,i-n[0],o-n[1],h,v,d);g=rotateRadians(u,l,p);C=compose(e,t);L=compose(g,C);b=resample(C,M);return reset()}function reset(){x=q=null;return projection}return function(){e=n.apply(this||t,arguments);projection.invert=e.invert&&invert;return recenter()}}function conicProjection(n){var t=0,e=a/3,r=projectionMutator(n),i=r(t,e);i.parallels=function(n){return arguments.length?r(t=n[0]*f,e=n[1]*f):[t*s,e*s]};return i}function cylindricalEqualAreaRaw(n){var t=h(n);function forward(n,e){return[n*t,R(e)/t]}forward.invert=function(n,e){return[n/t,asin(e*t)]};return forward}function conicEqualAreaRaw(n,t){var e=R(n),r=(e+R(t))/2;if(p(r)<i)return cylindricalEqualAreaRaw(n);var o=1+e*(2*r-e),c=P(o)/r;function project(n,t){var e=P(o-2*r*R(t))/r;return[e*R(n*=r),c-e*h(n)]}project.invert=function(n,t){var e=c-t,i=d(n,p(e))*y(e);e*r<0&&(i-=a*y(n)*y(e));return[i/r,asin((o-(n*n+e*e)*r*r)/(2*r))]};return project}function conicEqualArea(){return conicProjection(conicEqualAreaRaw).scale(155.424).center([0,33.6442])}function albers(){return conicEqualArea().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function multiplex(n){var t=n.length;return{point:function(e,r){var i=-1;while(++i<t)n[i].point(e,r)},sphere:function(){var e=-1;while(++e<t)n[e].sphere()},lineStart:function(){var e=-1;while(++e<t)n[e].lineStart()},lineEnd:function(){var e=-1;while(++e<t)n[e].lineEnd()},polygonStart:function(){var e=-1;while(++e<t)n[e].polygonStart()},polygonEnd:function(){var e=-1;while(++e<t)n[e].polygonEnd()}}}function albersUsa(){var n,t,e=albers(),r,o=conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),a,c=conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u,l,s={point:function(n,t){l=[n,t]}};function albersUsa(n){var t=n[0],e=n[1];return l=null,(r.point(t,e),l)||(a.point(t,e),l)||(u.point(t,e),l)}albersUsa.invert=function(n){var t=e.scale(),r=e.translate(),i=(n[0]-r[0])/t,a=(n[1]-r[1])/t;return(a>=.12&&a<.234&&i>=-.425&&i<-.214?o:a>=.166&&a<.234&&i>=-.214&&i<-.115?c:e).invert(n)};albersUsa.stream=function(r){return n&&t===r?n:n=multiplex([e.stream(t=r),o.stream(r),c.stream(r)])};albersUsa.precision=function(n){if(!arguments.length)return e.precision();e.precision(n),o.precision(n),c.precision(n);return reset()};albersUsa.scale=function(n){if(!arguments.length)return e.scale();e.scale(n),o.scale(.35*n),c.scale(n);return albersUsa.translate(e.translate())};albersUsa.translate=function(n){if(!arguments.length)return e.translate();var t=e.scale(),l=+n[0],f=+n[1];r=e.translate(n).clipExtent([[l-.455*t,f-.238*t],[l+.455*t,f+.238*t]]).stream(s);a=o.translate([l-.307*t,f+.201*t]).clipExtent([[l-.425*t+i,f+.12*t+i],[l-.214*t-i,f+.234*t-i]]).stream(s);u=c.translate([l-.205*t,f+.212*t]).clipExtent([[l-.214*t+i,f+.166*t+i],[l-.115*t-i,f+.234*t-i]]).stream(s);return reset()};albersUsa.fitExtent=function(n,t){return fitExtent(albersUsa,n,t)};albersUsa.fitSize=function(n,t){return fitSize(albersUsa,n,t)};albersUsa.fitWidth=function(n,t){return fitWidth(albersUsa,n,t)};albersUsa.fitHeight=function(n,t){return fitHeight(albersUsa,n,t)};function reset(){n=t=null;return albersUsa}return albersUsa.scale(1070)}function azimuthalRaw(n){return function(t,e){var r=h(t),i=h(e),o=n(r*i);return[o*i*R(t),o*R(e)]}}function azimuthalInvert(n){return function(t,e){var r=P(t*t+e*e),i=n(r),o=R(i),a=h(i);return[d(t*o,r*a),asin(r&&e*o/r)]}}var ot=azimuthalRaw((function(n){return P(2/(1+n))}));ot.invert=azimuthalInvert((function(n){return 2*asin(n/2)}));function azimuthalEqualArea(){return projection(ot).scale(124.75).clipAngle(180-.001)}var at=azimuthalRaw((function(n){return(n=acos(n))&&n/R(n)}));at.invert=azimuthalInvert((function(n){return n}));function azimuthalEquidistant(){return projection(at).scale(79.4188).clipAngle(180-.001)}function mercatorRaw(n,t){return[n,E(w((c+t)/2))]}mercatorRaw.invert=function(n,t){return[n,2*g(m(t))-c]};function mercator(){return mercatorProjection(mercatorRaw).scale(961/l)}function mercatorProjection(n){var t=projection(n),e=t.center,r=t.scale,i=t.translate,o=t.clipExtent,c=null,u,l,s;t.scale=function(n){return arguments.length?(r(n),reclip()):r()};t.translate=function(n){return arguments.length?(i(n),reclip()):i()};t.center=function(n){return arguments.length?(e(n),reclip()):e()};t.clipExtent=function(n){return arguments.length?(null==n?c=u=l=s=null:(c=+n[0][0],u=+n[0][1],l=+n[1][0],s=+n[1][1]),reclip()):null==c?null:[[c,u],[l,s]]};function reclip(){var e=a*r(),i=t(rotation(t.rotate()).invert([0,0]));return o(null==c?[[i[0]-e,i[1]-e],[i[0]+e,i[1]+e]]:n===mercatorRaw?[[Math.max(i[0]-e,c),u],[Math.min(i[0]+e,l),s]]:[[c,Math.max(i[1]-e,u)],[l,Math.min(i[1]+e,s)]])}return reclip()}function tany(n){return w((c+n)/2)}function conicConformalRaw(n,t){var e=h(n),r=n===t?R(n):E(e/h(t))/E(tany(t)/tany(n)),o=e*S(tany(n),r)/r;if(!r)return mercatorRaw;function project(n,t){o>0?t<-c+i&&(t=-c+i):t>c-i&&(t=c-i);var e=o/S(tany(t),r);return[e*R(r*n),o-e*h(r*n)]}project.invert=function(n,t){var e=o-t,i=y(r)*P(n*n+e*e),u=d(n,p(e))*y(e);e*r<0&&(u-=a*y(n)*y(e));return[u/r,2*g(S(o/i,1/r))-c]};return project}function conicConformal(){return conicProjection(conicConformalRaw).scale(109.5).parallels([30,30])}function equirectangularRaw(n,t){return[n,t]}equirectangularRaw.invert=equirectangularRaw;function equirectangular(){return projection(equirectangularRaw).scale(152.63)}function conicEquidistantRaw(n,t){var e=h(n),r=n===t?R(n):(e-h(t))/(t-n),o=e/r+n;if(p(r)<i)return equirectangularRaw;function project(n,t){var e=o-t,i=r*n;return[e*R(i),o-e*h(i)]}project.invert=function(n,t){var e=o-t,i=d(n,p(e))*y(e);e*r<0&&(i-=a*y(n)*y(e));return[i/r,o-y(r)*P(n*n+e*e)]};return project}function conicEquidistant(){return conicProjection(conicEquidistantRaw).scale(131.154).center([0,13.9389])}var ct=1.340264,ut=-.081106,lt=893e-6,st=.003796,ft=P(3)/2,pt=12;function equalEarthRaw(n,t){var e=asin(ft*R(t)),r=e*e,i=r*r*r;return[n*h(e)/(ft*(ct+3*ut*r+i*(7*lt+9*st*r))),e*(ct+ut*r+i*(lt+st*r))]}equalEarthRaw.invert=function(n,t){var e=t,r=e*e,i=r*r*r;for(var a=0,c,u,l;a<pt;++a){u=e*(ct+ut*r+i*(lt+st*r))-t;l=ct+3*ut*r+i*(7*lt+9*st*r);e-=c=u/l,r=e*e,i=r*r*r;if(p(c)<o)break}return[ft*n*(ct+3*ut*r+i*(7*lt+9*st*r))/h(e),asin(R(e)/ft)]};function equalEarth(){return projection(equalEarthRaw).scale(177.158)}function gnomonicRaw(n,t){var e=h(t),r=h(n)*e;return[e*R(n)/r,R(t)/r]}gnomonicRaw.invert=azimuthalInvert(g);function gnomonic(){return projection(gnomonicRaw).scale(144.049).clipAngle(60)}function identity$1(){var n=1,e=0,r=0,i=1,o=1,a=0,c,u,l=null,p,g,d,v=1,m=1,E=transformer({point:function(n,e){var r=projection([n,e]);(this||t).stream.point(r[0],r[1])}}),S=identity,y,P;function reset(){v=n*i;m=n*o;y=P=null;return projection}function projection(n){var t=n[0]*v,i=n[1]*m;if(a){var o=i*c-t*u;t=t*c+i*u;i=o}return[t+e,i+r]}projection.invert=function(n){var t=n[0]-e,i=n[1]-r;if(a){var o=i*c+t*u;t=t*c-i*u;i=o}return[t/v,i/m]};projection.stream=function(n){return y&&P===n?y:y=E(S(P=n))};projection.postclip=function(n){return arguments.length?(S=n,l=p=g=d=null,reset()):S};projection.clipExtent=function(n){return arguments.length?(S=null==n?(l=p=g=d=null,identity):clipRectangle(l=+n[0][0],p=+n[0][1],g=+n[1][0],d=+n[1][1]),reset()):null==l?null:[[l,p],[g,d]]};projection.scale=function(t){return arguments.length?(n=+t,reset()):n};projection.translate=function(n){return arguments.length?(e=+n[0],r=+n[1],reset()):[e,r]};projection.angle=function(n){return arguments.length?(a=n%360*f,u=R(a),c=h(a),reset()):a*s};projection.reflectX=function(n){return arguments.length?(i=n?-1:1,reset()):i<0};projection.reflectY=function(n){return arguments.length?(o=n?-1:1,reset()):o<0};projection.fitExtent=function(n,t){return fitExtent(projection,n,t)};projection.fitSize=function(n,t){return fitSize(projection,n,t)};projection.fitWidth=function(n,t){return fitWidth(projection,n,t)};projection.fitHeight=function(n,t){return fitHeight(projection,n,t)};return projection}function naturalEarth1Raw(n,t){var e=t*t,r=e*e;return[n*(.8707-.131979*e+r*(-.013791+r*(.003971*e-.001529*r))),t*(1.007226+e*(.015085+r*(-.044475+.028874*e-.005916*r)))]}naturalEarth1Raw.invert=function(n,t){var e=t,r=25,o;do{var a=e*e,c=a*a;e-=o=(e*(1.007226+a*(.015085+c*(-.044475+.028874*a-.005916*c)))-t)/(1.007226+a*(.015085*3+c*(-.044475*7+.028874*9*a-.005916*11*c)))}while(p(o)>i&&--r>0);return[n/(.8707+(a=e*e)*(-.131979+a*(-.013791+a*a*a*(.003971-.001529*a)))),e]};function naturalEarth1(){return projection(naturalEarth1Raw).scale(175.295)}function orthographicRaw(n,t){return[h(t)*R(n),R(t)]}orthographicRaw.invert=azimuthalInvert(asin);function orthographic(){return projection(orthographicRaw).scale(249.5).clipAngle(90+i)}function stereographicRaw(n,t){var e=h(t),r=1+h(n)*e;return[e*R(n)/r,R(t)/r]}stereographicRaw.invert=azimuthalInvert((function(n){return 2*g(n)}));function stereographic(){return projection(stereographicRaw).scale(250).clipAngle(142)}function transverseMercatorRaw(n,t){return[E(w((c+t)/2)),-n]}transverseMercatorRaw.invert=function(n,t){return[-t,2*g(m(n))-c]};function transverseMercator(){var n=mercatorProjection(transverseMercatorRaw),t=n.center,e=n.rotate;n.center=function(n){return arguments.length?t([-n[1],n[0]]):(n=t(),[n[1],-n[0]])};n.rotate=function(n){return arguments.length?e([n[0],n[1],n.length>2?n[2]+90:90]):(n=e(),[n[0],n[1],n[2]-90])};return e([0,0,90]).scale(159.155)}n.geoAlbers=albers;n.geoAlbersUsa=albersUsa;n.geoArea=area;n.geoAzimuthalEqualArea=azimuthalEqualArea;n.geoAzimuthalEqualAreaRaw=ot;n.geoAzimuthalEquidistant=azimuthalEquidistant;n.geoAzimuthalEquidistantRaw=at;n.geoBounds=bounds;n.geoCentroid=centroid;n.geoCircle=circle;n.geoClipAntimeridian=fn;n.geoClipCircle=clipCircle;n.geoClipExtent=extent;n.geoClipRectangle=clipRectangle;n.geoConicConformal=conicConformal;n.geoConicConformalRaw=conicConformalRaw;n.geoConicEqualArea=conicEqualArea;n.geoConicEqualAreaRaw=conicEqualAreaRaw;n.geoConicEquidistant=conicEquidistant;n.geoConicEquidistantRaw=conicEquidistantRaw;n.geoContains=contains;n.geoDistance=distance;n.geoEqualEarth=equalEarth;n.geoEqualEarthRaw=equalEarthRaw;n.geoEquirectangular=equirectangular;n.geoEquirectangularRaw=equirectangularRaw;n.geoGnomonic=gnomonic;n.geoGnomonicRaw=gnomonicRaw;n.geoGraticule=graticule;n.geoGraticule10=graticule10;n.geoIdentity=identity$1;n.geoInterpolate=interpolate;n.geoLength=length;n.geoMercator=mercator;n.geoMercatorRaw=mercatorRaw;n.geoNaturalEarth1=naturalEarth1;n.geoNaturalEarth1Raw=naturalEarth1Raw;n.geoOrthographic=orthographic;n.geoOrthographicRaw=orthographicRaw;n.geoPath=index;n.geoProjection=projection;n.geoProjectionMutator=projectionMutator;n.geoRotation=rotation;n.geoStereographic=stereographic;n.geoStereographicRaw=stereographicRaw;n.geoStream=geoStream;n.geoTransform=transform;n.geoTransverseMercator=transverseMercator;n.geoTransverseMercatorRaw=transverseMercatorRaw;Object.defineProperty(n,"__esModule",{value:true})}));const r=e.geoAlbers,i=e.geoAlbersUsa,o=e.geoArea,a=e.geoAzimuthalEqualArea,c=e.geoAzimuthalEqualAreaRaw,u=e.geoAzimuthalEquidistant,l=e.geoAzimuthalEquidistantRaw,s=e.geoBounds,f=e.geoCentroid,p=e.geoCircle,g=e.geoClipAntimeridian,d=e.geoClipCircle,h=e.geoClipExtent,v=e.geoClipRectangle,m=e.geoConicConformal,E=e.geoConicConformalRaw,S=e.geoConicEqualArea,R=e.geoConicEqualAreaRaw,y=e.geoConicEquidistant,P=e.geoConicEquidistantRaw,w=e.geoContains,j=e.geoDistance,M=e.geoEqualEarth,b=e.geoEqualEarthRaw,C=e.geoEquirectangular,L=e.geoEquirectangularRaw,x=e.geoGnomonic,q=e.geoGnomonicRaw,A=e.geoGraticule,N=e.geoGraticule10,I=e.geoIdentity,_=e.geoInterpolate,$=e.geoLength,z=e.geoMercator,T=e.geoMercatorRaw,G=e.geoNaturalEarth1,U=e.geoNaturalEarth1Raw,F=e.geoOrthographic,k=e.geoOrthographicRaw,O=e.geoPath,D=e.geoProjection,H=e.geoProjectionMutator,W=e.geoRotation,B=e.geoStereographic,X=e.geoStereographicRaw,Y=e.geoStream,Z=e.geoTransform,J=e.geoTransverseMercator,K=e.geoTransverseMercatorRaw,Q=e.__esModule;export default e;export{Q as __esModule,r as geoAlbers,i as geoAlbersUsa,o as geoArea,a as geoAzimuthalEqualArea,c as geoAzimuthalEqualAreaRaw,u as geoAzimuthalEquidistant,l as geoAzimuthalEquidistantRaw,s as geoBounds,f as geoCentroid,p as geoCircle,g as geoClipAntimeridian,d as geoClipCircle,h as geoClipExtent,v as geoClipRectangle,m as geoConicConformal,E as geoConicConformalRaw,S as geoConicEqualArea,R as geoConicEqualAreaRaw,y as geoConicEquidistant,P as geoConicEquidistantRaw,w as geoContains,j as geoDistance,M as geoEqualEarth,b as geoEqualEarthRaw,C as geoEquirectangular,L as geoEquirectangularRaw,x as geoGnomonic,q as geoGnomonicRaw,A as geoGraticule,N as geoGraticule10,I as geoIdentity,_ as geoInterpolate,$ as geoLength,z as geoMercator,T as geoMercatorRaw,G as geoNaturalEarth1,U as geoNaturalEarth1Raw,F as geoOrthographic,k as geoOrthographicRaw,O as geoPath,D as geoProjection,H as geoProjectionMutator,W as geoRotation,B as geoStereographic,X as geoStereographicRaw,Y as geoStream,Z as geoTransform,J as geoTransverseMercator,K as geoTransverseMercatorRaw};

