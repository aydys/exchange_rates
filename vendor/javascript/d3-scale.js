import n from"d3-collection";import e from"d3-array";import t from"d3-interpolate";import r from"d3-format";import a from"d3-time";import i from"d3-time-format";var o="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global;var l={};(function(o,c){c(l,n,e,t,r,a,i)})(l,(function(n,e,t,r,a,i,l){function initRange(n,e){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(e).domain(n);break}return this||o}function initInterpolator(n,e){switch(arguments.length){case 0:break;case 1:this.interpolator(n);break;default:this.interpolator(e).domain(n);break}return this||o}var c=Array.prototype;var u=c.map;var s=c.slice;var f={name:"implicit"};function ordinal(){var n=e.map(),t=[],r=[],a=f;function scale(e){var i=e+"",o=n.get(i);if(!o){if(a!==f)return a;n.set(i,o=t.push(e))}return r[(o-1)%r.length]}scale.domain=function(r){if(!arguments.length)return t.slice();t=[],n=e.map();var a=-1,i=r.length,o,l;while(++a<i)n.has(l=(o=r[a])+"")||n.set(l,t.push(o));return scale};scale.range=function(n){return arguments.length?(r=s.call(n),scale):r.slice()};scale.unknown=function(n){return arguments.length?(a=n,scale):a};scale.copy=function(){return ordinal(t,r).unknown(a)};initRange.apply(scale,arguments);return scale}function band(){var n=ordinal().unknown(void 0),e=n.domain,r=n.range,a=[0,1],i,o,l=false,c=0,u=0,s=.5;delete n.unknown;function rescale(){var n=e().length,f=a[1]<a[0],g=a[f-0],p=a[1-f];i=(p-g)/Math.max(1,n-c+2*u);l&&(i=Math.floor(i));g+=(p-g-i*(n-c))*s;o=i*(1-c);l&&(g=Math.round(g),o=Math.round(o));var m=t.range(n).map((function(n){return g+i*n}));return r(f?m.reverse():m)}n.domain=function(n){return arguments.length?(e(n),rescale()):e()};n.range=function(n){return arguments.length?(a=[+n[0],+n[1]],rescale()):a.slice()};n.rangeRound=function(n){return a=[+n[0],+n[1]],l=true,rescale()};n.bandwidth=function(){return o};n.step=function(){return i};n.round=function(n){return arguments.length?(l=!!n,rescale()):l};n.padding=function(n){return arguments.length?(c=Math.min(1,u=+n),rescale()):c};n.paddingInner=function(n){return arguments.length?(c=Math.min(1,n),rescale()):c};n.paddingOuter=function(n){return arguments.length?(u=+n,rescale()):u};n.align=function(n){return arguments.length?(s=Math.max(0,Math.min(1,n)),rescale()):s};n.copy=function(){return band(e(),a).round(l).paddingInner(c).paddingOuter(u).align(s)};return initRange.apply(rescale(),arguments)}function pointish(n){var e=n.copy;n.padding=n.paddingOuter;delete n.paddingInner;delete n.paddingOuter;n.copy=function(){return pointish(e())};return n}function point(){return pointish(band.apply(null,arguments).paddingInner(1))}function constant(n){return function(){return n}}function number(n){return+n}var g=[0,1];function identity(n){return n}function normalize(n,e){return(e-=n=+n)?function(t){return(t-n)/e}:constant(isNaN(e)?NaN:.5)}function clamper(n){var e=n[0],t=n[n.length-1],r;e>t&&(r=e,e=t,t=r);return function(n){return Math.max(e,Math.min(t,n))}}function bimap(n,e,t){var r=n[0],a=n[1],i=e[0],o=e[1];a<r?(r=normalize(a,r),i=t(o,i)):(r=normalize(r,a),i=t(i,o));return function(n){return i(r(n))}}function polymap(n,e,r){var a=Math.min(n.length,e.length)-1,i=new Array(a),o=new Array(a),l=-1;if(n[a]<n[0]){n=n.slice().reverse();e=e.slice().reverse()}while(++l<a){i[l]=normalize(n[l],n[l+1]);o[l]=r(e[l],e[l+1])}return function(e){var r=t.bisect(n,e,1,a)-1;return o[r](i[r](e))}}function copy(n,e){return e.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function transformer(){var n=g,e=g,t=r.interpolate,a,i,o,l=identity,c,f,p;function rescale(){c=Math.min(n.length,e.length)>2?polymap:bimap;f=p=null;return scale}function scale(r){return isNaN(r=+r)?o:(f||(f=c(n.map(a),e,t)))(a(l(r)))}scale.invert=function(t){return l(i((p||(p=c(e,n.map(a),r.interpolateNumber)))(t)))};scale.domain=function(e){return arguments.length?(n=u.call(e,number),l===identity||(l=clamper(n)),rescale()):n.slice()};scale.range=function(n){return arguments.length?(e=s.call(n),rescale()):e.slice()};scale.rangeRound=function(n){return e=s.call(n),t=r.interpolateRound,rescale()};scale.clamp=function(e){return arguments.length?(l=e?clamper(n):identity,scale):l!==identity};scale.interpolate=function(n){return arguments.length?(t=n,rescale()):t};scale.unknown=function(n){return arguments.length?(o=n,scale):o};return function(n,e){a=n,i=e;return rescale()}}function continuous(n,e){return transformer()(n,e)}function tickFormat(n,e,r,i){var o=t.tickStep(n,e,r),l;i=a.formatSpecifier(null==i?",f":i);switch(i.type){case"s":var c=Math.max(Math.abs(n),Math.abs(e));null!=i.precision||isNaN(l=a.precisionPrefix(o,c))||(i.precision=l);return a.formatPrefix(i,c);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(l=a.precisionRound(o,Math.max(Math.abs(n),Math.abs(e))))||(i.precision=l-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(l=a.precisionFixed(o))||(i.precision=l-2*("%"===i.type));break}return a.format(i)}function linearish(n){var e=n.domain;n.ticks=function(n){var r=e();return t.ticks(r[0],r[r.length-1],null==n?10:n)};n.tickFormat=function(n,t){var r=e();return tickFormat(r[0],r[r.length-1],null==n?10:n,t)};n.nice=function(r){null==r&&(r=10);var a=e(),i=0,o=a.length-1,l=a[i],c=a[o],u;if(c<l){u=l,l=c,c=u;u=i,i=o,o=u}u=t.tickIncrement(l,c,r);if(u>0){l=Math.floor(l/u)*u;c=Math.ceil(c/u)*u;u=t.tickIncrement(l,c,r)}else if(u<0){l=Math.ceil(l*u)/u;c=Math.floor(c*u)/u;u=t.tickIncrement(l,c,r)}if(u>0){a[i]=Math.floor(l/u)*u;a[o]=Math.ceil(c/u)*u;e(a)}else if(u<0){a[i]=Math.ceil(l*u)/u;a[o]=Math.floor(c*u)/u;e(a)}return n};return n}function linear(){var n=continuous(identity,identity);n.copy=function(){return copy(n,linear())};initRange.apply(n,arguments);return linearish(n)}function identity$1(n){var e;function scale(n){return isNaN(n=+n)?e:n}scale.invert=scale;scale.domain=scale.range=function(e){return arguments.length?(n=u.call(e,number),scale):n.slice()};scale.unknown=function(n){return arguments.length?(e=n,scale):e};scale.copy=function(){return identity$1(n).unknown(e)};n=arguments.length?u.call(n,number):[0,1];return linearish(scale)}function nice(n,e){n=n.slice();var t=0,r=n.length-1,a=n[t],i=n[r],o;if(i<a){o=t,t=r,r=o;o=a,a=i,i=o}n[t]=e.floor(a);n[r]=e.ceil(i);return n}function transformLog(n){return Math.log(n)}function transformExp(n){return Math.exp(n)}function transformLogn(n){return-Math.log(-n)}function transformExpn(n){return-Math.exp(-n)}function pow10(n){return isFinite(n)?+("1e"+n):n<0?0:n}function powp(n){return 10===n?pow10:n===Math.E?Math.exp:function(e){return Math.pow(n,e)}}function logp(n){return n===Math.E?Math.log:10===n&&Math.log10||2===n&&Math.log2||(n=Math.log(n),function(e){return Math.log(e)/n})}function reflect(n){return function(e){return-n(-e)}}function loggish(n){var e=n(transformLog,transformExp),r=e.domain,i=10,o,l;function rescale(){o=logp(i),l=powp(i);if(r()[0]<0){o=reflect(o),l=reflect(l);n(transformLogn,transformExpn)}else n(transformLog,transformExp);return e}e.base=function(n){return arguments.length?(i=+n,rescale()):i};e.domain=function(n){return arguments.length?(r(n),rescale()):r()};e.ticks=function(n){var e=r(),a=e[0],c=e[e.length-1],u;(u=c<a)&&(s=a,a=c,c=s);var s=o(a),f=o(c),g,p,m,h=null==n?10:+n,d=[];if(!(i%1)&&f-s<h){s=Math.round(s)-1,f=Math.round(f)+1;if(a>0)for(;s<f;++s)for(p=1,g=l(s);p<i;++p){m=g*p;if(!(m<a)){if(m>c)break;d.push(m)}}else for(;s<f;++s)for(p=i-1,g=l(s);p>=1;--p){m=g*p;if(!(m<a)){if(m>c)break;d.push(m)}}}else d=t.ticks(s,f,Math.min(f-s,h)).map(l);return u?d.reverse():d};e.tickFormat=function(n,t){null==t&&(t=10===i?".0e":",");"function"!==typeof t&&(t=a.format(t));if(Infinity===n)return t;null==n&&(n=10);var r=Math.max(1,i*n/e.ticks().length);return function(n){var e=n/l(Math.round(o(n)));e*i<i-.5&&(e*=i);return e<=r?t(n):""}};e.nice=function(){return r(nice(r(),{floor:function(n){return l(Math.floor(o(n)))},ceil:function(n){return l(Math.ceil(o(n)))}}))};return e}function log(){var n=loggish(transformer()).domain([1,10]);n.copy=function(){return copy(n,log()).base(n.base())};initRange.apply(n,arguments);return n}function transformSymlog(n){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/n))}}function transformSymexp(n){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*n}}function symlogish(n){var e=1,t=n(transformSymlog(e),transformSymexp(e));t.constant=function(t){return arguments.length?n(transformSymlog(e=+t),transformSymexp(e)):e};return linearish(t)}function symlog(){var n=symlogish(transformer());n.copy=function(){return copy(n,symlog()).constant(n.constant())};return initRange.apply(n,arguments)}function transformPow(n){return function(e){return e<0?-Math.pow(-e,n):Math.pow(e,n)}}function transformSqrt(n){return n<0?-Math.sqrt(-n):Math.sqrt(n)}function transformSquare(n){return n<0?-n*n:n*n}function powish(n){var e=n(identity,identity),t=1;function rescale(){return 1===t?n(identity,identity):.5===t?n(transformSqrt,transformSquare):n(transformPow(t),transformPow(1/t))}e.exponent=function(n){return arguments.length?(t=+n,rescale()):t};return linearish(e)}function pow(){var n=powish(transformer());n.copy=function(){return copy(n,pow()).exponent(n.exponent())};initRange.apply(n,arguments);return n}function sqrt(){return pow.apply(null,arguments).exponent(.5)}function quantile(){var n=[],e=[],r=[],a;function rescale(){var a=0,i=Math.max(1,e.length);r=new Array(i-1);while(++a<i)r[a-1]=t.quantile(n,a/i);return scale}function scale(n){return isNaN(n=+n)?a:e[t.bisect(r,n)]}scale.invertExtent=function(t){var a=e.indexOf(t);return a<0?[NaN,NaN]:[a>0?r[a-1]:n[0],a<r.length?r[a]:n[n.length-1]]};scale.domain=function(e){if(!arguments.length)return n.slice();n=[];for(var r=0,a=e.length,i;r<a;++r)(i=e[r],null==i||isNaN(i=+i))||n.push(i);n.sort(t.ascending);return rescale()};scale.range=function(n){return arguments.length?(e=s.call(n),rescale()):e.slice()};scale.unknown=function(n){return arguments.length?(a=n,scale):a};scale.quantiles=function(){return r.slice()};scale.copy=function(){return quantile().domain(n).range(e).unknown(a)};return initRange.apply(scale,arguments)}function quantize(){var n=0,e=1,r=1,a=[.5],i=[0,1],o;function scale(n){return n<=n?i[t.bisect(a,n,0,r)]:o}function rescale(){var t=-1;a=new Array(r);while(++t<r)a[t]=((t+1)*e-(t-r)*n)/(r+1);return scale}scale.domain=function(t){return arguments.length?(n=+t[0],e=+t[1],rescale()):[n,e]};scale.range=function(n){return arguments.length?(r=(i=s.call(n)).length-1,rescale()):i.slice()};scale.invertExtent=function(t){var o=i.indexOf(t);return o<0?[NaN,NaN]:o<1?[n,a[0]]:o>=r?[a[r-1],e]:[a[o-1],a[o]]};scale.unknown=function(n){return arguments.length?(o=n,scale):scale};scale.thresholds=function(){return a.slice()};scale.copy=function(){return quantize().domain([n,e]).range(i).unknown(o)};return initRange.apply(linearish(scale),arguments)}function threshold(){var n=[.5],e=[0,1],r,a=1;function scale(i){return i<=i?e[t.bisect(n,i,0,a)]:r}scale.domain=function(t){return arguments.length?(n=s.call(t),a=Math.min(n.length,e.length-1),scale):n.slice()};scale.range=function(t){return arguments.length?(e=s.call(t),a=Math.min(n.length,e.length-1),scale):e.slice()};scale.invertExtent=function(t){var r=e.indexOf(t);return[n[r-1],n[r]]};scale.unknown=function(n){return arguments.length?(r=n,scale):r};scale.copy=function(){return threshold().domain(n).range(e).unknown(r)};return initRange.apply(scale,arguments)}var p=1e3,m=60*p,h=60*m,d=24*h,y=7*d,v=30*d,M=365*d;function date(n){return new Date(n)}function number$1(n){return n instanceof Date?+n:+new Date(+n)}function calendar(n,e,r,a,i,o,l,c,s){var f=continuous(identity,identity),g=f.invert,w=f.domain;var k=s(".%L"),q=s(":%S"),S=s("%I:%M"),b=s("%I %p"),x=s("%a %d"),N=s("%b %d"),I=s("%B"),$=s("%Y");var P=[[l,1,p],[l,5,5*p],[l,15,15*p],[l,30,30*p],[o,1,m],[o,5,5*m],[o,15,15*m],[o,30,30*m],[i,1,h],[i,3,3*h],[i,6,6*h],[i,12,12*h],[a,1,d],[a,2,2*d],[r,1,y],[e,1,v],[e,3,3*v],[n,1,M]];function tickFormat(t){return(l(t)<t?k:o(t)<t?q:i(t)<t?S:a(t)<t?b:e(t)<t?r(t)<t?x:N:n(t)<t?I:$)(t)}function tickInterval(e,r,a,i){null==e&&(e=10);if("number"===typeof e){var o=Math.abs(a-r)/e,l=t.bisector((function(n){return n[2]})).right(P,o);if(l===P.length){i=t.tickStep(r/M,a/M,e);e=n}else if(l){l=P[o/P[l-1][2]<P[l][2]/o?l-1:l];i=l[1];e=l[0]}else{i=Math.max(t.tickStep(r,a,e),1);e=c}}return null==i?e:e.every(i)}f.invert=function(n){return new Date(g(n))};f.domain=function(n){return arguments.length?w(u.call(n,number$1)):w().map(date)};f.ticks=function(n,e){var t=w(),r=t[0],a=t[t.length-1],i=a<r,o;i&&(o=r,r=a,a=o);o=tickInterval(n,r,a,e);o=o?o.range(r,a+1):[];return i?o.reverse():o};f.tickFormat=function(n,e){return null==e?tickFormat:s(e)};f.nice=function(n,e){var t=w();return(n=tickInterval(n,t[0],t[t.length-1],e))?w(nice(t,n)):f};f.copy=function(){return copy(f,calendar(n,e,r,a,i,o,l,c,s))};return f}function time(){return initRange.apply(calendar(i.timeYear,i.timeMonth,i.timeWeek,i.timeDay,i.timeHour,i.timeMinute,i.timeSecond,i.timeMillisecond,l.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function utcTime(){return initRange.apply(calendar(i.utcYear,i.utcMonth,i.utcWeek,i.utcDay,i.utcHour,i.utcMinute,i.utcSecond,i.utcMillisecond,l.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function transformer$1(){var n=0,e=1,t,r,a,i,o=identity,l=false,c;function scale(n){return isNaN(n=+n)?c:o(0===a?.5:(n=(i(n)-t)*a,l?Math.max(0,Math.min(1,n)):n))}scale.domain=function(o){return arguments.length?(t=i(n=+o[0]),r=i(e=+o[1]),a=t===r?0:1/(r-t),scale):[n,e]};scale.clamp=function(n){return arguments.length?(l=!!n,scale):l};scale.interpolator=function(n){return arguments.length?(o=n,scale):o};scale.unknown=function(n){return arguments.length?(c=n,scale):c};return function(o){i=o,t=o(n),r=o(e),a=t===r?0:1/(r-t);return scale}}function copy$1(n,e){return e.domain(n.domain()).interpolator(n.interpolator()).clamp(n.clamp()).unknown(n.unknown())}function sequential(){var n=linearish(transformer$1()(identity));n.copy=function(){return copy$1(n,sequential())};return initInterpolator.apply(n,arguments)}function sequentialLog(){var n=loggish(transformer$1()).domain([1,10]);n.copy=function(){return copy$1(n,sequentialLog()).base(n.base())};return initInterpolator.apply(n,arguments)}function sequentialSymlog(){var n=symlogish(transformer$1());n.copy=function(){return copy$1(n,sequentialSymlog()).constant(n.constant())};return initInterpolator.apply(n,arguments)}function sequentialPow(){var n=powish(transformer$1());n.copy=function(){return copy$1(n,sequentialPow()).exponent(n.exponent())};return initInterpolator.apply(n,arguments)}function sequentialSqrt(){return sequentialPow.apply(null,arguments).exponent(.5)}function sequentialQuantile(){var n=[],e=identity;function scale(r){if(!isNaN(r=+r))return e((t.bisect(n,r)-1)/(n.length-1))}scale.domain=function(e){if(!arguments.length)return n.slice();n=[];for(var r=0,a=e.length,i;r<a;++r)(i=e[r],null==i||isNaN(i=+i))||n.push(i);n.sort(t.ascending);return scale};scale.interpolator=function(n){return arguments.length?(e=n,scale):e};scale.copy=function(){return sequentialQuantile(e).domain(n)};return initInterpolator.apply(scale,arguments)}function transformer$2(){var n=0,e=.5,t=1,r,a,i,o,l,c=identity,u,s=false,f;function scale(n){return isNaN(n=+n)?f:(n=.5+((n=+u(n))-a)*(n<a?o:l),c(s?Math.max(0,Math.min(1,n)):n))}scale.domain=function(c){return arguments.length?(r=u(n=+c[0]),a=u(e=+c[1]),i=u(t=+c[2]),o=r===a?0:.5/(a-r),l=a===i?0:.5/(i-a),scale):[n,e,t]};scale.clamp=function(n){return arguments.length?(s=!!n,scale):s};scale.interpolator=function(n){return arguments.length?(c=n,scale):c};scale.unknown=function(n){return arguments.length?(f=n,scale):f};return function(c){u=c,r=c(n),a=c(e),i=c(t),o=r===a?0:.5/(a-r),l=a===i?0:.5/(i-a);return scale}}function diverging(){var n=linearish(transformer$2()(identity));n.copy=function(){return copy$1(n,diverging())};return initInterpolator.apply(n,arguments)}function divergingLog(){var n=loggish(transformer$2()).domain([.1,1,10]);n.copy=function(){return copy$1(n,divergingLog()).base(n.base())};return initInterpolator.apply(n,arguments)}function divergingSymlog(){var n=symlogish(transformer$2());n.copy=function(){return copy$1(n,divergingSymlog()).constant(n.constant())};return initInterpolator.apply(n,arguments)}function divergingPow(){var n=powish(transformer$2());n.copy=function(){return copy$1(n,divergingPow()).exponent(n.exponent())};return initInterpolator.apply(n,arguments)}function divergingSqrt(){return divergingPow.apply(null,arguments).exponent(.5)}n.scaleBand=band;n.scalePoint=point;n.scaleIdentity=identity$1;n.scaleLinear=linear;n.scaleLog=log;n.scaleSymlog=symlog;n.scaleOrdinal=ordinal;n.scaleImplicit=f;n.scalePow=pow;n.scaleSqrt=sqrt;n.scaleQuantile=quantile;n.scaleQuantize=quantize;n.scaleThreshold=threshold;n.scaleTime=time;n.scaleUtc=utcTime;n.scaleSequential=sequential;n.scaleSequentialLog=sequentialLog;n.scaleSequentialPow=sequentialPow;n.scaleSequentialSqrt=sequentialSqrt;n.scaleSequentialSymlog=sequentialSymlog;n.scaleSequentialQuantile=sequentialQuantile;n.scaleDiverging=diverging;n.scaleDivergingLog=divergingLog;n.scaleDivergingPow=divergingPow;n.scaleDivergingSqrt=divergingSqrt;n.scaleDivergingSymlog=divergingSymlog;n.tickFormat=tickFormat;Object.defineProperty(n,"__esModule",{value:true})}));const c=l.scaleBand,u=l.scalePoint,s=l.scaleIdentity,f=l.scaleLinear,g=l.scaleLog,p=l.scaleSymlog,m=l.scaleOrdinal,h=l.scaleImplicit,d=l.scalePow,y=l.scaleSqrt,v=l.scaleQuantile,M=l.scaleQuantize,w=l.scaleThreshold,k=l.scaleTime,q=l.scaleUtc,S=l.scaleSequential,b=l.scaleSequentialLog,x=l.scaleSequentialPow,N=l.scaleSequentialSqrt,I=l.scaleSequentialSymlog,$=l.scaleSequentialQuantile,P=l.scaleDiverging,D=l.scaleDivergingLog,L=l.scaleDivergingPow,R=l.scaleDivergingSqrt,F=l.scaleDivergingSymlog,E=l.tickFormat,O=l.__esModule;export default l;export{O as __esModule,c as scaleBand,P as scaleDiverging,D as scaleDivergingLog,L as scaleDivergingPow,R as scaleDivergingSqrt,F as scaleDivergingSymlog,s as scaleIdentity,h as scaleImplicit,f as scaleLinear,g as scaleLog,m as scaleOrdinal,u as scalePoint,d as scalePow,v as scaleQuantile,M as scaleQuantize,S as scaleSequential,b as scaleSequentialLog,x as scaleSequentialPow,$ as scaleSequentialQuantile,N as scaleSequentialSqrt,I as scaleSequentialSymlog,y as scaleSqrt,p as scaleSymlog,w as scaleThreshold,k as scaleTime,q as scaleUtc,E as tickFormat};

